(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-index-detail-report"],{"054b":function(t,i,e){"use strict";e.d(i,"b",(function(){return a})),e.d(i,"c",(function(){return n})),e.d(i,"a",(function(){}));var a=function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("v-uni-view",[e("v-uni-view",{staticClass:"text-center-h text-md"},[t._v("举报用户ID "+t._s(t.user_info.id))]),e("v-uni-view",{staticClass:"pp"},[e("v-uni-view",{staticClass:"rows pt"},[e("v-uni-view",{staticClass:"form-text-left form-text-left text-color-6"},[t._v("用户名称")]),e("v-uni-view",{staticClass:"form-text-right text-color-6"},[t._v(t._s(t.user_info.nickname)+" "+t._s(t.user_info.company_server_name))])],1),e("v-uni-view",{staticClass:"rows pt pb"},[e("v-uni-view",{staticClass:"form-text-left form-text-left text-color-6"},[t._v("用户公司")]),e("v-uni-view",{staticClass:"form-text-right text-color-6"},[t._v(t._s(t.user_info.company_name))])],1),e("v-uni-view",{staticClass:"rows"},[e("v-uni-view",{staticClass:"form-text-left form-text-left"},[t._v("举报标题*")]),e("v-uni-view",{staticClass:"form-text-right"},[e("v-uni-input",{attrs:{"data-key":"title",value:t.model.title,type:"text",placeholder:"请输入标题"},on:{input:function(i){arguments[0]=i=t.$handleEvent(i),t.onInput.apply(void 0,arguments)}}})],1)],1),e("v-uni-view",{staticClass:"rows pt"},[e("v-uni-view",{staticClass:"form-text-left form-text-left"},[t._v("举报描述*")]),e("v-uni-view",{staticClass:"form-text-right"},[e("v-uni-textarea",{staticClass:"text-height-desc",staticStyle:{"max-width":"500rpx"},attrs:{"data-key":"text",value:t.model.text,maxlength:"10240",type:"text",placeholder:"请输入举报详细描述"},on:{input:function(i){arguments[0]=i=t.$handleEvent(i),t.onInput.apply(void 0,arguments)}}})],1)],1),e("v-uni-view",{staticClass:"rows pt "},[e("v-uni-view",{staticClass:"form-text-left form-text-left"},[t._v("举报图片")]),e("v-uni-view",{staticClass:"form-text-right"},[e("v-uni-input",{attrs:{type:"text",placeholder:"请选择举报证据图片"},on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.onAddImg.apply(void 0,arguments)}}})],1)],1),e("v-uni-view",{staticClass:"box-wrap-start"},t._l(t.listPhoto,(function(i,a){return e("v-uni-view",{key:a,staticClass:"col img-box pr pt"},[e("v-uni-image",{staticClass:"img-border",attrs:{src:t.app.upload+i,"data-src":t.app.upload+i},on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.previewImage.apply(void 0,arguments)}}}),e("v-uni-button",{staticClass:"btn-danger  full-width text-center-hv",attrs:{"data-index":a},on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.onDelImg.apply(void 0,arguments)}}},[t._v("x")])],1)})),1),e("v-uni-view",{staticClass:"box-wrap-start"},t._l(t.listPhotoLocal,(function(i,a){return e("v-uni-view",{key:a,staticClass:"col img-box pr pt"},[e("v-uni-image",{staticClass:"img-border",attrs:{src:i,"data-src":i},on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.previewImage.apply(void 0,arguments)}}}),e("v-uni-button",{staticClass:"btn-danger  full-width text-center-hv",attrs:{"data-index":a},on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.onDelImgLocal.apply(void 0,arguments)}}},[t._v("x")])],1)})),1),e("v-uni-view",{staticClass:"pt-lg mt-lg"},[e("v-uni-button",{staticClass:"btn-danger",on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.onSave.apply(void 0,arguments)}}},[t._v("确认举报")])],1)],1)],1)},n=[]},"0a3e":function(t,i,e){"use strict";e.r(i);var a=e("1872"),n=e.n(a);for(var o in a)["default"].indexOf(o)<0&&function(t){e.d(i,t,(function(){return a[t]}))}(o);i["default"]=n.a},1872:function(t,i,e){"use strict";(function(t){e("7a82");var a=e("4ea4").default;Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var n=a(e("5530"));e("a434"),e("99af"),e("14d9");var o={data:function(){return{model:{title:"",text:"",imgs:""},user_info:{},app:this.app,listPhoto:[],listPhotoLocal:[]}},methods:{onInput:function(t){var i=this.app.ed(t).key;this.model[i]=this.app.ev(t)},onDelImg:function(t){var i=this.app.ed(t).index;this.listPhoto.splice(i,1)},onDelImgLocal:function(t){var i=this.app.ed(t).index;this.listPhotoLocal.splice(i,1)},onAddImg:function(){var t=this,i=6-this.listPhoto.length-this.listPhotoLocal.length;i>0?this.app.chooseImage((function(i){var e=t.app.concat(t.listPhotoLocal,i);t.listPhotoLocal=e}),i):this.app.toast("超出上限")},previewImage:function(t){this.app.previewImage(t)},onSave:function(){var i=this;this.model.title?this.model.text?this.app.msgSys("确认举报",(function(e){e&&i.app.uploadFiles("api/user_report/upload",i.listPhotoLocal,(function(e){var a=[];for(var o in e)a.push(e[o].saveName);var s=i.listPhoto.concat(a);i.model.imgs=i.app.join(s,","),i.app.postLoad("api/user_report/save",(0,n.default)((0,n.default)({},i.model),{},{user_id:i.user_info.id}),(function(e){"0"==e.code&&(i.model={title:"",text:"",imgs:""},i.listPhoto=[],i.listPhotoLocal=[],i.app.toast("举报成功"),t("log",a," at pages/index/detail/report.vue:149"))}))}))})):this.app.toast("请输入举报描述"):this.app.toast("请输入举报标题")}},onLoad:function(t){var i=this,e=t.user_id;e?(this.user_id=e,this.app.post("api/user/user_info",{user_id:e},(function(t){i.user_info=t}))):this.app.toast("缺少用户ID")},onShow:function(){this.app.checkUser()}};i.default=o}).call(this,e("0de9")["log"])},e030:function(t,i,e){"use strict";e.r(i);var a=e("054b"),n=e("0a3e");for(var o in n)["default"].indexOf(o)<0&&function(t){e.d(i,t,(function(){return n[t]}))}(o);var s=e("f0c5"),l=Object(s["a"])(n["default"],a["b"],a["c"],!1,null,"58136f9c",null,!1,a["a"],void 0);i["default"]=l.exports}}]);