(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-comment-comment_input"],{b849:function(t,i,e){"use strict";e.d(i,"b",(function(){return a})),e.d(i,"c",(function(){return s})),e.d(i,"a",(function(){}));var a=function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("v-uni-view",[e("v-uni-view",{staticClass:"pp rows text-center-v"},[e("v-uni-view",{staticClass:"pr"},[t._v("好感度")]),e("v-uni-view",{staticClass:"rows text-lg"},t._l(t.rate_list,(function(i,a){return e("v-uni-view",{staticClass:"pr",attrs:{"data-index":a},on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.onRate.apply(void 0,arguments)}}},[a<=t.rate_index?e("v-uni-image",{staticClass:"icon-rate",attrs:{src:"/static/images/rate_ed.png"}}):e("v-uni-image",{staticClass:"icon-rate",attrs:{src:"/static/images/rate_df.png"}})],1)})),1),t.rate_index>=0?e("v-uni-view",[t._v(t._s(t.rate_list[t.rate_index].text))]):t._e()],1),e("v-uni-view",{staticClass:"line-wx-xs"}),e("v-uni-view",{staticClass:"pp"},[e("v-uni-view",{staticClass:"bg-f1 pp",staticStyle:{"border-radius":"10rpx"}},[e("v-uni-textarea",{staticClass:"full-width ",staticStyle:{height:"200rpx"},attrs:{value:"",placeholder:"好感评价",maxlength:"2000"},model:{value:t.model.text,callback:function(i){t.$set(t.model,"text",i)},expression:"model.text"}})],1)],1),e("v-uni-view",{staticClass:"line-wx-xs"}),e("v-uni-view",{staticClass:"rows-wrap ml mr"},[t.video?e("v-uni-view",{staticClass:"col-4 text-center-hv"},[e("v-uni-view",{staticClass:"comment-img-box text-center-hv cols"},[e("v-uni-image",{staticClass:"comment-img",attrs:{src:"/static/images/icon_video.png"}}),e("v-uni-view",{},[t._v("视频")]),e("v-uni-image",{staticClass:"comment-img-del",attrs:{src:"/static/images/icon_del_top.png"},on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.onDelVideo.apply(void 0,arguments)}}})],1)],1):t._e(),t._l(t.img_list,(function(i,a){return e("v-uni-view",{staticClass:"col-4 text-center-hv"},[e("v-uni-view",{staticClass:"comment-img-box text-center-hv cols"},[e("v-uni-image",{staticClass:"comment-image",attrs:{src:t.app.upload+i.img}}),e("v-uni-image",{staticClass:"comment-img-del",attrs:{src:"/static/images/icon_del_top.png","data-index":a},on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.onDelImg.apply(void 0,arguments)}}})],1)],1)})),9-this.img_list.length-(this.video?1:0)>0?e("v-uni-view",{staticClass:"col-4 text-center-hv"},[e("v-uni-view",{staticClass:"comment-img-box text-center-hv cols ",on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.onAddImg.apply(void 0,arguments)}}},[e("v-uni-image",{staticClass:"comment-img",attrs:{src:"/static/images/icon_img_add.png"}}),e("v-uni-view",{},[t._v("添加图片")])],1)],1):t._e()],2),e("v-uni-view",{staticClass:"line-wx-xs"}),e("v-uni-view",{staticClass:"pp rows ",attrs:{"hover-class":"opcity","hover-stay-time":150}},[e("v-uni-checkbox-group",{staticClass:"text-center-v",on:{change:function(i){arguments[0]=i=t.$handleEvent(i),t.onCheckAnonym.apply(void 0,arguments)}}},[e("v-uni-label",{staticClass:"rows "},[e("v-uni-checkbox",{staticClass:"checkbox checkbox-danger"}),e("v-uni-text",{},[t._v("匿名评价")])],1)],1)],1),e("v-uni-view",{staticClass:"rows pt-lg ml mr"},[e("v-uni-button",{staticClass:"btn-danger btn-block",on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.onComment.apply(void 0,arguments)}}},[t._v("提交")])],1)],1)},s=[]},c84b:function(t,i,e){"use strict";e.r(i);var a=e("b849"),s=e("fa06");for(var n in s)["default"].indexOf(n)<0&&function(t){e.d(i,t,(function(){return s[t]}))}(n);var o=e("f0c5"),c=Object(o["a"])(s["default"],a["b"],a["c"],!1,null,"01c6a570",null,!1,a["a"],void 0);i["default"]=c.exports},dcaf:function(t,i,e){"use strict";(function(t){e("7a82");var a=e("4ea4").default;Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var s=a(e("5530"));e("14d9"),e("a434");var n={data:function(){return{app:this.app,user_id:"",user:{},me:{},rate_index:-1,rate_list:[{rate:1,text:"非常差"},{rate:2,text:"差"},{rate:3,text:"一般"},{rate:4,text:"好"},{rate:5,text:"非常好"}],img_list:[],video:"",model:{sale_id:"",rate:"",text:"",img:"",video:"",is_anonym:"0"}}},methods:{reLoad:function(){var t=this,i=this.user_id;i?(this.app.post("api/user/find_detail",{user_id:i},(function(i){t.user=i.user})),this.app.post("api/user/info",{},(function(e){t.me=e,e.id==i&&(t.app.toast("不能评论自己"),t.app.backTime(1e3))}))):this.app.toast("缺少ID")},onRate:function(t){var i=this.app.ed(t).index,e=this.rate_list[i];this.rate_index=i,this.model.rate=e.rate},onCheckInter:function(t){this.check_inter=!this.check_inter},onAddImg:function(t){var i=this;this.app.chooseImage((function(t){i.app.toastUpload(),i.app.uploadFiles("api/comment/upload",t,(function(t){for(var e in i.app.toastHide(),t)i.img_list.push({img:t[e].saveName})}))}),9-this.img_list.length-(this.video?1:0))},onAddVideo:function(t){var i=this;this.app.chooseVideo((function(t,e){var a=e.duration;a>61?i.app.toast("视频超过60s"):(i.app.toastUpload(),i.app.uploadFile("api/comment/upload_video?XDEBUG_SESSION_START=13476",t,(function(t){i.app.toastHide(),i.video=t.saveName})))}))},onComment:function(i){var e=this;this.model.img=this.app.join(this.img_list,",","img"),this.model.video=this.video,this.model.sale_id=this.user_id,t("log",this.model," at pages/comment/comment_input.vue:244"),this.model.sale_id?this.model.rate?this.model.text?this.model.text.length<10?this.app.toast("请输入10字及以上评论"):this.app.msgs("确定进行评价",(function(){e.app.post("api/comment/comment",(0,s.default)({},e.model),(function(t){"0"==t.code?(e.app.toast("评价成功"),e.app.backTime(1e3,{is_reload:1})):e.app.toast(t.data)}))})):this.app.toast("请输入评论"):this.app.toast("请选择好感度"):this.app.toast("缺少用户")},onDelImg:function(t){var i=this.app.ed(t).index;this.img_list.splice(i,1)},onDelVideo:function(t){this.video=null},onCheckAnonym:function(t){"0"==this.model.is_anonym?this.model.is_anonym="1":this.model.is_anonym="0"}},onLoad:function(t){this.user_id=t.user_id,this.reLoad()}};i.default=n}).call(this,e("0de9")["log"])},fa06:function(t,i,e){"use strict";e.r(i);var a=e("dcaf"),s=e.n(a);for(var n in a)["default"].indexOf(n)<0&&function(t){e.d(i,t,(function(){return a[t]}))}(n);i["default"]=s.a}}]);