(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-index-product-product_add"],{"6f14":function(t,i,e){"use strict";(function(t){e("7a82");var a=e("4ea4").default;Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var n=a(e("5530"));e("a434"),e("99af"),e("14d9"),e("d3b7"),e("159b");var o={data:function(){return{model:{},listPhoto:[],listPhotoBase:[],listPhotoLocal:[]}},methods:{onInput:function(t){var i=this.app.ed(t).key;this.model[i]=this.app.ev(t)},onDelImg:function(t){var i=this.app.ed(t).index;this.listPhoto.splice(i,1),this.listPhotoBase.splice(i,1)},onDelImgLocal:function(t){var i=this.app.ed(t).index;this.listPhotoLocal.splice(i,1)},onAddImg:function(){var t=this,i=6-this.listPhoto.length-this.listPhotoLocal.length;i>0?this.app.chooseImage((function(i){var e=t.app.concat(t.listPhotoLocal,i);t.listPhotoLocal=e}),i):this.app.toast("超出上限")},previewImage:function(t){this.app.previewImage(t)},onSave:function(){var i=this;this.app.uploadFiles("api/product/upload",this.listPhotoLocal,(function(e){var a=[];for(var o in e)a.push(e[o].saveName);var s=i.listPhotoBase.concat(a);i.model.imgs=i.app.join(s,","),a.length>0&&(i.model.img=a[0]),i.model.type="1",i.app.postLoad("api/product/save",(0,n.default)({},i.model),(function(e){"0"==e.code&&(i.app.toast("发布成功"),t("log",a," at pages/index/product/product_add.vue:122"))}))}))}},onLoad:function(t){var i=this,e=t.id;e&&this.app.post("api/product/find",{id:e},(function(t){i.model=t.data;var e=t.imgs_split;e.forEach((function(t){i.listPhoto.push(i.app.upload+t),i.listPhotoBase.push(t)}))}))}};i.default=o}).call(this,e("0de9")["log"])},"9d0e":function(t,i,e){"use strict";e.r(i);var a=e("6f14"),n=e.n(a);for(var o in a)["default"].indexOf(o)<0&&function(t){e.d(i,t,(function(){return a[t]}))}(o);i["default"]=n.a},ecc2:function(t,i,e){"use strict";e.r(i);var a=e("fc59"),n=e("9d0e");for(var o in n)["default"].indexOf(o)<0&&function(t){e.d(i,t,(function(){return n[t]}))}(o);var s=e("f0c5"),l=Object(s["a"])(n["default"],a["b"],a["c"],!1,null,"4aabc4be",null,!1,a["a"],void 0);i["default"]=l.exports},fc59:function(t,i,e){"use strict";e.d(i,"b",(function(){return a})),e.d(i,"c",(function(){return n})),e.d(i,"a",(function(){}));var a=function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("v-uni-view",[e("v-uni-view",{staticClass:"text-center-h text-md"},[t._v("发布生产")]),e("v-uni-view",{staticClass:"pp"},[e("v-uni-view",{staticClass:"rows"},[e("v-uni-view",{staticClass:"form-text-left form-text-left"},[t._v("标题")]),e("v-uni-view",{staticClass:"form-text-right"},[e("v-uni-input",{attrs:{"data-key":"title",value:t.model.title,type:"text",placeholder:"请输入标题"},on:{input:function(i){arguments[0]=i=t.$handleEvent(i),t.onInput.apply(void 0,arguments)}}})],1)],1),e("v-uni-view",{staticClass:"rows pt"},[e("v-uni-view",{staticClass:"form-text-left form-text-left"},[t._v("描述")]),e("v-uni-view",{staticClass:"form-text-right"},[e("v-uni-textarea",{staticClass:"text-height-desc",attrs:{"data-key":"text",value:t.model.text,maxlength:"10240",type:"text",placeholder:"请输入描述"},on:{input:function(i){arguments[0]=i=t.$handleEvent(i),t.onInput.apply(void 0,arguments)}}})],1)],1),e("v-uni-view",{staticClass:"rows pt"},[e("v-uni-view",{staticClass:"form-text-left form-text-left"},[t._v("价格")]),e("v-uni-view",{staticClass:"form-text-right"},[e("v-uni-input",{attrs:{"data-key":"price",value:t.model.price,type:"text",placeholder:"请输入价格"},on:{input:function(i){arguments[0]=i=t.$handleEvent(i),t.onInput.apply(void 0,arguments)}}})],1)],1),e("v-uni-view",{staticClass:"rows pt"},[e("v-uni-view",{staticClass:"form-text-left form-text-left"},[t._v("数量")]),e("v-uni-view",{staticClass:"form-text-right"},[e("v-uni-input",{attrs:{"data-key":"count",value:t.model.count,type:"text",placeholder:"请输入数量"},on:{input:function(i){arguments[0]=i=t.$handleEvent(i),t.onInput.apply(void 0,arguments)}}})],1)],1),e("v-uni-view",{staticClass:"rows pt "},[e("v-uni-view",{staticClass:"form-text-left form-text-left"},[t._v("图片")]),e("v-uni-view",{staticClass:"form-text-right"},[e("v-uni-input",{attrs:{type:"text",placeholder:"请选择图片"},on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.onAddImg.apply(void 0,arguments)}}})],1)],1),e("v-uni-view",{staticClass:"box-wrap-start"},t._l(t.listPhoto,(function(i,a){return e("v-uni-view",{key:a,staticClass:"col img-box pr pt"},[e("v-uni-image",{staticClass:"img-border",attrs:{src:i,"data-src":i},on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.previewImage.apply(void 0,arguments)}}}),e("v-uni-button",{staticClass:"btn-danger  full-width text-center-hv",attrs:{"data-index":a},on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.onDelImg.apply(void 0,arguments)}}},[t._v("x")])],1)})),1),e("v-uni-view",{staticClass:"box-wrap-start"},t._l(t.listPhotoLocal,(function(i,a){return e("v-uni-view",{key:a,staticClass:"col img-box pr pt"},[e("v-uni-image",{staticClass:"img-border",attrs:{src:i,"data-src":i},on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.previewImage.apply(void 0,arguments)}}}),e("v-uni-button",{staticClass:"btn-danger  full-width text-center-hv",attrs:{"data-index":a},on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.onDelImgLocal.apply(void 0,arguments)}}},[t._v("x")])],1)})),1),e("v-uni-view",{staticClass:"pt-lg"},[e("v-uni-button",{staticClass:"btn-success",on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.onSave.apply(void 0,arguments)}}},[t._v("发布")])],1)],1)],1)},n=[]}}]);