(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-plus-plus"],{1619:function(t,i,n){"use strict";n("7a82");var o=n("4ea4").default;Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var a=o(n("5530"));n("e25e");var s={data:function(){return{user:{},order:{},month:"",input_month:"",system:"",system_show:"0",plus_product:[],ali_loading:!1,wx_loading:!1,ios_loading:!1}},computed:{monthToPrice:function(){return function(t){var i=5*t;return i>=60&&(i*=.85),i}},plusTime:function(){return function(t){return t?t.substr(0,10):t}}},methods:{reLoad:function(){var t=this;this.app.post("api/user/info",{},(function(i){t.user=i})),this.app.postHtml("api/config/config",{key:"system_vip_show"},(function(i){t.system_show=i.value}));var i=uni.getSystemInfoSync().platform;this.system=i,"ios"==i?this.app.postLoad("api/plus_product/ios",{},(function(i){t.plus_product=i})):this.app.postLoad("api/plus_product/android",{},(function(i){t.plus_product=i}))},onInputMonth:function(t){var i=this,n=parseInt(this.app.ev(t));n||(n=""),this.$nextTick((function(){i.month=n}))},btnWxPay:function(){var t=this,i=this;i.payPre((function(){t.wx_loading=!0,i.app.wxPay({total:i.order.price,subject:"自定义订单",out_trade_no:i.order.order_no},(function(t){i.payFinish()}),(function(i){t.wx_loading=!1}))}),{pay_type:"2"})},btnAliPay:function(){var t=this,i=this;i.payPre((function(){t.ali_loading=!0,i.app.aliPay({total:i.order.price,subject:"自定义订单",out_trade_no:i.order.order_no},(function(t){i.payFinish()}),(function(i){t.ali_loading=!1}))}),{pay_type:"1"})},btnApplePay:function(){var t=this,i=this;i.payPreIos((function(){t.ios_loading=!0,i.app.ApplePay({total:i.order.price,subject:"自定义订单",out_trade_no:i.order.order_no,apple_product_list:i.order.apple_product_list,apple_product:i.order.apple_product},(function(t){i.payFinish()}),(function(i){t.ios_loading=!1}))}),{pay_type:"3"})},payPre:function(t,i){var n=this;this.month?this.app.post("api/plus_order/cre_order_month?XDEBUG_SESSION_START=11841",(0,a.default)({month:this.month},i),(function(i){n.order=i,t&&t()})):this.app.toast("请选择月份")},payPreIos:function(t,i){var n=this;this.month?this.app.post("api/plus_order/cre_order_month_ios?XDEBUG_SESSION_START=11841",(0,a.default)({month:this.month},i),(function(i){n.order=i,t&&t()})):this.app.toast("请选择月份")},payFinish:function(){var t=this;this.app.post("api/plus_order/order_pay_finish?XDEBUG_SESSION_START=15934",{order_no:this.order.order_no},(function(i){t.app.toast("支付成功"),t.reLoad()}))},onMonth:function(t){var i=this.app.ed(t).month;this.month=i},onLogout:function(){var t=this;this.app.msgSys("退出登录！",(function(i){i&&(t.app.setUser(null),t.app.go("/pages/login/login"))}))}},onLoad:function(){this.app.setTitle("我的会员")},onShow:function(){this.reLoad()}};i.default=s},"28e6":function(t,i,n){var o=n("24fb");i=o(!1),i.push([t.i,".plus-box-w[data-v-55d63be6]{width:50%}.plus-box[data-v-55d63be6]{margin:%?10?%;height:%?200?%;border-radius:%?20?%;border:%?1?% solid #fa0;background:#fef5eb}.plus-box-check[data-v-55d63be6]{background:#e1d9d1}.plus-box-check-text[data-v-55d63be6]{background:#e9c444}",""]),t.exports=i},"49c5":function(t,i,n){"use strict";n.d(i,"b",(function(){return o})),n.d(i,"c",(function(){return a})),n.d(i,"a",(function(){}));var o=function(){var t=this,i=t.$createElement,n=t._self._c||i;return n("v-uni-view",[t.user.plus_time_end?n("v-uni-view",{staticClass:"pt pl pr pb-lg"},[n("v-uni-view",{staticClass:"pt rows"},[n("v-uni-view",[t._v("会员到期时间：")]),n("v-uni-view",{staticClass:"text-color-6 rows"},[n("v-uni-image",{staticStyle:{width:"42rpx",height:"42rpx"},attrs:{src:"/static/image/vip.png",alt:"",mode:"scaleToFill"}}),n("v-uni-view",{staticClass:"pl-sm"},[t._v(t._s(t.plusTime(t.user.plus_time_end)))])],1)],1)],1):t._e(),n("v-uni-view",{staticClass:"pp"},[t._v("开通会员服务（开通12个月及以上享8.5折优惠，年费会员）")]),n("v-uni-view",[n("v-uni-view",{staticClass:"rows-wrap ml-sm mr-sm"},[t._l(t.plus_product,(function(i,o){return n("v-uni-view",{staticClass:"plus-box-w"},[n("v-uni-view",{staticClass:"plus-box text-center-hv cols ",class:[t.month==i.month?"plus-box-check":""],attrs:{"data-month":i.month},on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.onMonth.apply(void 0,arguments)}}},[n("v-uni-view",{staticClass:"text-md"},[t._v(t._s(i.month)+"个月")]),n("v-uni-view",{staticClass:"text-sm"},[t._v(t._s(i.price)+"元("+t._s(i.month)+"个月)")])],1)],1)})),"android"==t.system?n("v-uni-view",{staticClass:"plus-box-w"},[n("v-uni-view",{staticClass:"plus-box text-center-hv cols",class:[""!=t.month?"plus-box-check-text":""]},[n("v-uni-view",{staticClass:"rows text-center-hv"},[n("v-uni-view",{staticStyle:{margin:"25rpx"}},[n("v-uni-input",{staticClass:"text-md",staticStyle:{"text-align":"center",width:"100rpx",border:"4rpx solid #ffaa00",padding:"5rpx 15rpx"},attrs:{type:"digit"},on:{input:function(i){arguments[0]=i=t.$handleEvent(i),t.onInputMonth.apply(void 0,arguments)}},model:{value:t.month,callback:function(i){t.month=i},expression:"month"}})],1),n("v-uni-view",[t._v("个月")])],1),n("v-uni-view",{staticClass:"text-sm"},[t._v("共计"+t._s(t.monthToPrice(t.month))+"元("+t._s(t.month)+"个月)")])],1)],1):t._e()],2)],1),n("v-uni-view",{staticClass:"box-wrap-space-around pt-lg mt-lg pl-lg pr-lg"},["android"==t.system?n("v-uni-view",[n("v-uni-image",{staticClass:"icon-pay",attrs:{src:"/static/image/icon_pay_ali.jpg",mode:""},on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.btnAliPay.apply(void 0,arguments)}}})],1):t._e(),"android"==t.system?n("v-uni-view",[n("v-uni-image",{staticClass:"icon-pay",attrs:{src:"/static/image/icon_pay_wx.jpg",mode:""},on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.btnWxPay.apply(void 0,arguments)}}})],1):t._e(),"ios"==t.system?n("v-uni-view",[n("v-uni-button",{staticClass:"btn-dark",staticStyle:{width:"400rpx !important"},attrs:{loading:t.ios_loading,disabled:t.ios_loading},on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.btnApplePay.apply(void 0,arguments)}}},[t._v("立即开通")])],1):t._e()],1),n("v-uni-view",{staticStyle:{height:"200rpx"}}),t.user.openid?n("v-uni-view",{staticClass:"bottom bg-white-bg rows"},[n("v-uni-button",{staticClass:" btn-warning full-width",on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.onLogout.apply(void 0,arguments)}}},[t._v("更换账号")])],1):t._e()],1)},a=[]},5361:function(t,i,n){"use strict";n.r(i);var o=n("49c5"),a=n("f49b");for(var s in a)["default"].indexOf(s)<0&&function(t){n.d(i,t,(function(){return a[t]}))}(s);n("b874");var e=n("f0c5"),r=Object(e["a"])(a["default"],o["b"],o["c"],!1,null,"55d63be6",null,!1,o["a"],void 0);i["default"]=r.exports},b874:function(t,i,n){"use strict";var o=n("ea5d"),a=n.n(o);a.a},ea5d:function(t,i,n){var o=n("28e6");o.__esModule&&(o=o.default),"string"===typeof o&&(o=[[t.i,o,""]]),o.locals&&(t.exports=o.locals);var a=n("4f06").default;a("4b5abef0",o,!0,{sourceMap:!1,shadowMode:!1})},f49b:function(t,i,n){"use strict";n.r(i);var o=n("1619"),a=n.n(o);for(var s in o)["default"].indexOf(s)<0&&function(t){n.d(i,t,(function(){return o[t]}))}(s);i["default"]=a.a}}]);