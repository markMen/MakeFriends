(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-chat_group-chat_group"],{"12e0":function(t,i,a){var e=a("24fb");i=e(!1),i.push([t.i,'.input-text-voice-cancel[data-v-34c8a78b]{position:absolute;bottom:%?400?%\n\n\t\t/* filter: Alpha(opacity=100); */\n\t\t/* IE */\n\t\t/* -moz-opacity:1; */\n\t\t/* FF 主要是为了兼容老版本的FF */\n\t\t/* opacity:1; */\n\t\t/* FF */}.chat-content[data-v-34c8a78b]{\n\t\t/* \t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\talign-items: center;\n\t\tjustify-content: center;\n\t\tpadding: 30rpx;\n\t\tbackground-color: #FFFFFF; */margin:0 %?20?%}.m-item[data-v-34c8a78b]{position:relative\n\t\t/* position: relative;\n\t\twidth: 100%;\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tmargin: 30rpx 0; */}.m-item-none[data-v-34c8a78b]{position:absolute;top:0;left:0;z-index:10;width:100%;height:100%;background:#ebedf6}uni-page-body[data-v-34c8a78b]{background:#ebedf6}body.?%PAGE?%[data-v-34c8a78b]{background:#ebedf6}.container[data-v-34c8a78b]{padding-left:%?20?%;padding-right:%?20?%;padding-bottom:%?146?%;box-sizing:border-box}\n\n\t/*--tabbar--*/.tui-operation[data-v-34c8a78b]{height:100%;width:100%;height:%?100?%;overflow:hidden;background:#eff2fc;position:fixed;left:0;bottom:0;display:flex;align-items:center;justify-content:space-between;padding-bottom:env(safe-area-inset-bottom);z-index:999}.tui-operation-inpupt-voice[data-v-34c8a78b]{background:#000;\n\t\t/* width: 100%;\n        height: 100%;\n        overflow: hidden;\n        position: absolute;\n        z-index: 999; */padding-bottom:%?100?%;filter:Alpha(opacity=50);\n\t\t/* IE */-moz-opacity:.5;\n\t\t/* FF 主要是为了兼容老版本的FF */opacity:.5\n\t\t/* FF */}.tui-safearea-bottom[data-v-34c8a78b]{width:100%;height:env(safe-area-inset-bottom)}.tui-operation[data-v-34c8a78b]::before{content:"";position:absolute;top:0;right:0;left:0;border-top:%?1?% solid #eaeef1;-webkit-transform:scaleY(.5);transform:scaleY(.5)}.tui-chat-operation[data-v-34c8a78b]{background:#f6f6f6!important\n\t\t/* padding-right: 18upx; */\n\t\t/* box-sizing: border-box; */}.tui-pl[data-v-34c8a78b]{padding-left:%?16?%}.tui-pr[data-v-34c8a78b]{padding-right:%?16?%}.tui-right-flex[data-v-34c8a78b]{display:flex;align-items:center;justify-content:center}.tui-input-box[data-v-34c8a78b]{\n\t\t/* width: 78%; */width:100%;justify-content:flex-start}.tui-chat-input[data-v-34c8a78b]{background:#fff;height:%?72?%;border-radius:%?6?%;padding-left:%?20?%;padding-right:%?20?%;flex:1;width:100%}.tui-opcity[data-v-34c8a78b]{opacity:.5}\n\n\t/*--tabbar--*/\n\n\t/*chatbox*/.tui-chat-content[data-v-34c8a78b]{width:100%}.tui-chatbox[data-v-34c8a78b]{\n\t\t/* max-width: 66%; */max-width:66%;border-radius:%?10?%;position:relative;padding:%?20?% %?22?%;font-size:%?32?%;color:#000;\n\t\t/* text-align: justify; */word-break:break-all;word-wrap:break-word}.tui-chatbox-max[data-v-34c8a78b]{max-width:100%}.tui-chatbox[data-v-34c8a78b]::before{content:"";position:absolute;width:0;height:0;top:%?20?%;border:%?16?% solid}.tui-chatbox-left[data-v-34c8a78b]{background:#fff;border:%?1?% solid #fff;display:inline-block}.tui-chatbox-left[data-v-34c8a78b]::before{right:100%;border-color:transparent #fff transparent transparent}.tui-chatbox-right[data-v-34c8a78b]{background:#a0d5f3;border:%?1?% solid #a0d5f3}.tui-chatbox-right[data-v-34c8a78b]::before{left:100%;border-color:transparent transparent transparent #a0d5f3}\n\n\t/*chatbox*/.tui-chat-left[data-v-34c8a78b],\n\t.tui-chat-right[data-v-34c8a78b]{display:flex;align-items:flex-start;padding-top:%?36?%}.tui-chat-left-padding[data-v-34c8a78b],\n\t.tui-chat-right-padding[data-v-34c8a78b]{display:flex;align-items:flex-start;padding-top:%?10?%}.tui-chat-right-padding[data-v-34c8a78b]{justify-content:flex-end}.tui-chat-right-time[data-v-34c8a78b]{display:flex;align-items:flex-start;justify-content:flex-end}.tui-user-pic[data-v-34c8a78b]{width:%?80?%;height:%?80?%;flex-shrink:0;\n\t\t/* border-radius: 50%; */display:block;border-radius:10%}.tui-left[data-v-34c8a78b]{margin-left:%?26?%}.tui-right[data-v-34c8a78b]{margin-right:%?26?%}.tui-chat-right[data-v-34c8a78b]{justify-content:flex-end}.tui-chat-center[data-v-34c8a78b]{display:flex;align-items:center;justify-content:center;height:%?28?%;font-size:%?28?%;color:#666;padding-top:%?36?%}.tui-label[data-v-34c8a78b]{display:inline-block;background:rgba(0,0,0,.4);color:#fff;font-size:%?24?%;line-height:%?24?%;margin-top:%?36?%;padding:%?12?% %?16?%;text-align:center;border-radius:%?8?%;margin-left:50%;-webkit-transform:translateX(-50%);transform:translateX(-50%)}.tui-img-chatbox[data-v-34c8a78b]{position:relative}.tui-img-chatbox[data-v-34c8a78b]::after{content:"";position:absolute;height:200%;width:200%;border:%?1?% solid #eaeef1;transform-origin:0 0;-webkit-transform-origin:0 0;-webkit-transform:scale(.5);transform:scale(.5);left:0;top:0;border-radius:%?20?%}.tui-chat-img[data-v-34c8a78b]{max-width:%?200?%;\n\t\t/* min-height: 80upx; */display:block;border-radius:%?10?%}.tui-chat-flex[data-v-34c8a78b]{display:flex;align-items:center}.tui-flex-center[data-v-34c8a78b]{display:flex;align-items:center}.tui-chat-voice[data-v-34c8a78b]{width:%?40?%;height:%?40?%;display:block;flex-shrink:0}.tui-rotate[data-v-34c8a78b]{-webkit-transform:rotate(180deg);transform:rotate(180deg)}.tui-chat-fail[data-v-34c8a78b]{width:%?50?%;height:%?50?%;display:block;flex-shrink:0}.tui-mr[data-v-34c8a78b]{margin-right:%?16?%}.tui-ml[data-v-34c8a78b]{margin-left:%?16?%}.tui-flex-end[data-v-34c8a78b]{justify-content:flex-end}.tui-flex-reverse[data-v-34c8a78b]{flex-direction:row-reverse}.chat-video-box[data-v-34c8a78b]{position:relative;border-radius:%?5?%;background-color:#333;width:%?250?%;height:%?200?%}.chat-video[data-v-34c8a78b]{background-color:#3333333ee;width:%?100?%;height:%?75?%}.tui-chatbox[data-v-34c8a78b]{padding:%?20?% %?20?%}.tui-chatbox-video[data-v-34c8a78b]{padding:%?6?% %?6?%}.tui-chatbox-play-left[data-v-34c8a78b]{background:#9eea6a;border:%?1?% solid #9eea6a}.tui-chatbox-play-right[data-v-34c8a78b]{background:#9eea6a;border:%?1?% solid #9eea6a}.tui-chatbox-play-left[data-v-34c8a78b]::before{right:100%;border-color:transparent #9eea6a transparent transparent}.tui-chatbox-play-right[data-v-34c8a78b]::before{left:100%;border-color:transparent transparent transparent #9eea6a}\n\n\t/* 位置消息 */.chat-location[data-v-34c8a78b]{border-radius:%?5?%;background-color:#f0f0f0;width:100%;height:%?180?%}.tui-chatbox-location[data-v-34c8a78b]{width:60%}\n\n\t/* 底部消息栏 */.bottom-msg-options[data-v-34c8a78b]{background:#f6f6f6}\n\n\t/* 消息里面的更多  按钮 */.msg-more-item[data-v-34c8a78b]{height:%?180?%;width:25%}.bottom-msg-input[data-v-34c8a78b]{padding:%?20?% 0}.msg-more-type-box[data-v-34c8a78b]{border-top:%?1?% solid #e0e0e0;height:%?500?%}.msg-more-type-more[data-v-34c8a78b]{padding:%?40?% 0 %?80?% 0}.msg-more-type-emoji[data-v-34c8a78b]{padding:%?10?%}\n\n\t/* 表情 */.msg-more-emoji[data-v-34c8a78b]{height:auto;width:12.5%;font-size:%?70?%}.msg-more-emoji-type[data-v-34c8a78b]{height:auto;padding:%?10?%;font-size:%?50?%}.msg-more-type-emoji-box[data-v-34c8a78b]{height:100%;min-height:100%;max-height:100%;background-color:#e0e0e0}.msg-more-emoji-action[data-v-34c8a78b]{border-radius:%?10?%;background-color:#b0b0b0}.uni-scroll-view[data-v-34c8a78b]::-webkit-scrollbar{display:none}.text-top-nomore[data-v-34c8a78b]{font-size:%?22?%;color:#b0b0b0}.chat-video-cover[data-v-34c8a78b]{\n\t\t/* \toverflow: hidden;\n\t\tmax-width: 250rpx;\n\t\tmax-height: 200rpx; */width:%?250?%;\n\t\t/* height: 200rpx; */border-radius:%?5?%;overflow:hidden}.chat-video-play-img-box[data-v-34c8a78b]{position:absolute;left:0;right:0;top:0;bottom:0}.btn-send-speek[data-v-34c8a78b]{background:#07c060;color:#fff}.btn-send-speek-item[data-v-34c8a78b]{padding:%?2?% %?10?%}',""]),t.exports=i},"3e46":function(t,i,a){"use strict";a.r(i);var e=a("c503"),o=a("b45a");for(var n in o)["default"].indexOf(n)<0&&function(t){a.d(i,t,(function(){return o[t]}))}(n);a("bf60");var s=a("f0c5"),c=Object(s["a"])(o["default"],e["b"],e["c"],!1,null,"34c8a78b",null,!1,e["a"],void 0);i["default"]=c.exports},"58dc":function(t,i,a){"use strict";(function(t){a("7a82");var e=a("4ea4").default;Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var o=e(a("5530"));a("ac1f"),a("14d9"),a("d3b7");e(a("72a6"));var n=e(a("2ac2")),s=e(a("3fa8")),c=e(a("1304")),r=e(a("3232")),u=e(a("e684")),p=e(a("128c")),l=e(a("0611")),d=uni.getRecorderManager(),h=uni.createInnerAudioContext(),v={components:{tuiIcon:n.default,tuiBadge:s.default,tuiLoadmore:c.default,viveModalMenu:r.default,tuiLoading:u.default,viveLoadmore:p.default,MumuRecorder:l.default},data:function(){return{app:this.app,config:{is_admin_back_msg:"1"},user_id:"",group_id:"",chat_group:{},group_user_me:{},me:{},you:{},chat_list:[],input_text:"",input_type:"0",input_text_title:"按住 说话",input_text_voice_type:"0",input_text_cancel_type:"0",loadding:!1,show:!1,bottom:0,scrollTop:0,style:{pageHeight:0,contentViewHeight:0,footViewHeight:90,mitemHeight:0},voicePath:"",startData:{clientX:0,clientY:0},audio_time:0,audio_time_loop:null,index_play_msg:-1,index_play:-1,is_friend:"1",selected:null,modal_menu:["复制","撤回","删除","多选","取消"],menu_text:"",char_page_index:0,msgMoreType:"",emoji_type:[],ANDROID_RECORD_AUDIO:-1,is_top_nomore:!1,recorder:null,audio_status_h5:0,input_type_h5:0}},computed:{formatLocation:function(){return function(t){var i=this.app.toObject(t.text);if(i&&i.name)return i.name}},formatLocationDetail:function(){return function(t){var i=this.app.toObject(t.text);if(i&&i.address)return i.address}}},onLoad:function(t){var i=this;t.group_id&&(this.group_id=t.group_id),this.app.getUser((function(t){i.me=t,i.app.post("api/chat_group/info",{group_id:i.group_id},(function(t){var a=t.code,e=t.data;0==a&&(i.chat_group=e.chat_group,i.app.setTitle(i.chat_group.nickname),i.group_user_me=e.group_user_me)})),i.onChatNext((function(){null!=i.app.timeLoop&&clearInterval(i.app.timeLoop),i.app.timeLoop=setInterval((function(){i.onChatNext()}),i.app.data.loopTaskTime),i.onChatNextBottom()})),i.app.loopTask((function(t){t.red_group_chat_count>0&&i.onChatNext()})),i.app.post("api/text_emoji/all",{user_id:i.user_id},(function(t){i.emoji_type=t}))})),this.input_type_h5="1",this.input_text_title="点击 录制语音消息"},onShow:function(){var t=this;this.app.checkUser(),this.loadAudio(),this.app.post("api/chat_group/find",{id:this.group_id},(function(i){var a=i.code,e=i.data;0==a&&(t.chat_group=e,t.app.setTitle(e.nickname))}))},onHide:function(){h.stop(),this.stopAudioAni()},onUnload:function(){this.app.data.loopTaskEnable=!0,clearInterval(this.app.timeLoop),h.stop(),h.destroy(),h=null,this.stopAudioAni()},methods:{loadAudio:function(){var i=this;d=uni.getRecorderManager(),h=uni.createInnerAudioContext();var a=this;d.onStop((function(i){t("log","录制的语音: "+i.tempFilePath," at pages/chat_group/chat_group.vue:635"),a.voicePath=i.tempFilePath})),h.onPlay((function(){i.index_play=1,t("log","开始播放"," at pages/chat_group/chat_group.vue:640")})),h.onError((function(a){i.index_play=-1,t("log",a.errMsg," at pages/chat_group/chat_group.vue:644"),t("log",a.errCode," at pages/chat_group/chat_group.vue:645")})),h.onStop((function(){i.index_play=-1,t("log","停止播放"," at pages/chat_group/chat_group.vue:649")})),h.onEnded((function(){i.index_play=-1,t("log","播放结束"," at pages/chat_group/chat_group.vue:654"),i.stopAudioAni()}))},stopAudioAni:function(){for(var t in this.chat_list)this.chat_list[t].is_play_audio="0"},onAdd:function(t){var i=this;this.loadding||(this.loadding=!0,setTimeout((function(){i.show=!0,i.loadding=!1,i.onChatPre()}),100))},onAvatar:function(t){var i=this.app.ed(t).id,a=this.app.ed(t).user_type;1==a?this.app.toast("客服无详情"):this.app.go("/pages/chat_group/group_user_info",{user_id:i,group_id:this.chat_group.id})},reLoad:function(){this.onChatNext()},onInputText:function(t){this.input_text=this.app.ev(t)},send:function(t){var i=this;this.app.post("api/chat_group/chat_send?XDEBUG_SESSION_START=13656",{group_id:this.chat_group.id,user_id:this.user_id,me_id:this.me.id,text:this.input_text},(function(t){i.input_text="",i.onChatNextBottom(),i.onMsgMoreClose()}))},scrollToBottom:function(){this.$nextTick((function(){uni.pageScrollTo({scrollTop:999999,duration:0})}))},scrollToBottomItem:function(i,a){this.$nextTick((function(){var e=uni.createSelectorQuery().select("#chat"+i);e.boundingClientRect((function(e){t("log","#chat"+i+"距离顶部"+e.top," at pages/chat_group/chat_group.vue:734"),uni.pageScrollTo({scrollTop:e.top,duration:0}),a&&a()})).exec()}))},startRecord:function(){t("log","开始录音"," at pages/chat_group/chat_group.vue:781"),d.start()},endRecord:function(){t("log","录音结束"," at pages/chat_group/chat_group.vue:786"),d.stop()},playVoice:function(){t("log","播放录音"," at pages/chat_group/chat_group.vue:790");var i=uni.createInnerAudioContext();i.autoplay=!0,this.voicePath&&(i.src=this.voicePath,i.play())},onUploadVoice:function(){var t=this;this.app.uploadFile("api/chat_group/chat_send",{name:"file",path:this.voicePath,data:{type:"2",user_id:this.user_id,me_id:this.me.id,group_id:this.chat_group.id}},(function(i){t.reLoad()}))},onPayAudio:function(t){var i=this.app.ed(t).index,a=this.chat_list[i];if(this.stopAudioAni(),1!=a.is_click&&(a.is_click=1,this.app.post("api/chat_group/chat_click",{chat_id:a.id},(function(t){}))),-1==this.index_play||i!=this.index_play_msg){h.stop();var e=this.app.upload+a.text;h.src=e,h.play(),a.is_play_audio="1"}else h.stop();this.index_play_msg=i},onAndroidPermiss:function(){},onAudioStart:function(i){var a=this;h.stop(),this.stopAudioAni();var e=function(){d=uni.getRecorderManager();var e=a;d.onStop((function(i){t("log","录制的语音: "+i.tempFilePath," at pages/chat_group/chat_group.vue:883"),e.voicePath=i.tempFilePath})),a.startData.clientX=i.changedTouches[0].clientX,a.startData.clientY=i.changedTouches[0].clientY,a.input_text_title="松开 结束",a.input_text_voice_type="1",a.input_text_cancel_type="0",a.audio_time=0,a.audio_time_loop&&clearInterval(a.audio_time_loop),a.audio_time_loop=setInterval((function(){a.audio_time++,a.audio_time>60&&(a.audio_time=60)}),1e3),d.stop(),d.start()};this.app.isAndroid()?"1"==this.ANDROID_RECORD_AUDIO?e():this.onAndroidPermiss():e()},onAudioMove:function(i){var a=i.changedTouches[0].clientX-this.startData.clientX,e=i.changedTouches[0].clientY-this.startData.clientY;e>200||e<-200?(t("log","上下滑"," at pages/chat_group/chat_group.vue:925"),this.input_text_cancel_type="1"):(this.input_text_cancel_type="0",a>100?t("log","右滑"," at pages/chat_group/chat_group.vue:930"):a<-100?t("log","左滑"," at pages/chat_group/chat_group.vue:932"):t("log","无效"," at pages/chat_group/chat_group.vue:934"))},onAudioEnd:function(i){var a=this,e=this;this.input_text_cancel_type="0";i.changedTouches[0].clientX,this.startData.clientX;var o=i.changedTouches[0].clientY-this.startData.clientY;o>200||o<-200?(t("log","取消发送"," at pages/chat_group/chat_group.vue:947"),this.input_text_title="按住 说话",this.input_text_voice_type="0",d.stop()):(t("log","发送 语音消息"," at pages/chat_group/chat_group.vue:954"),this.input_text_title="按住 说话",this.input_text_voice_type="0",d.stop(),e.$nextTick((function(){setTimeout((function(){e.app.uploadFile("api/chat_group/chat_send",{name:"file",path:e.voicePath,data:{type:"2",user_id:a.user_id,me_id:a.me.id,group_id:a.chat_group.id}},(function(t){"0"==t.code?e.onChatNextBottom():e.app.toast(t.data)}))}),300)})))},onAudioCancel:function(i){var a=this,e=this;t("log","中断录音"," at pages/chat_group/chat_group.vue:1000"),e.input_text_title="按住 说话",e.input_text_voice_type="0",d.stop(),e.$nextTick((function(){setTimeout((function(){e.app.uploadFile("api/chat_group/chat_send",{name:"file",path:e.voicePath,data:{type:"2",user_id:a.user_id,me_id:a.me.id,group_id:a.chat_group.id}},(function(t){"0"==t.code?e.onChatNextBottom():e.app.toast(t.data)}))}),300)}))},onCancelVoice:function(i){this.input_text_title="按住 说话",this.input_text_voice_type="0",d.stop(),t("log","取消发送"," at pages/chat_group/chat_group.vue:1032")},onAddImg:function(i){var a=this;this.app.chooseImage((function(i){var e=[];for(var o in i)e.push({name:"file",path:i[o],data:{type:"1",user_id:a.user_id,me_id:a.me.id,chat_no:a.app.uuidStr(),group_id:a.chat_group.id}});uni.showToast({title:"上传中…",icon:"loading",duration:99999}),e.forEach((function(i){var e=i,o={title:"",text:e.path,path:e.path,from:a.me.id,to:a.you.id,type:e.data.type,chat_no:e.data.chat_no,per:0};a.chat_list.push(o),a.onChatNextBottom(),a.app.uploadFileTask("api/chat_group/chat_send",e,(function(i){t("log",i," at pages/chat_group/chat_group.vue:1072"),o.per=i.per}),(function(){a.onChatNextBottom(),a.app.toastHide(),a.onMsgMoreClose()}))}))}),9)},previewImage:function(t){this.app.previewImage(t)},onAddVideo:function(i){var a=this;this.app.chooseVideo((function(i,e){var o=e.duration,n={name:"file",path:i,data:{type:"3",user_id:a.user_id,me_id:a.me.id,duration:o,chat_no:a.app.uuidStr(),group_id:a.chat_group.id}};if(o>61)a.app.toast("视频超过60s");else{uni.showToast({title:"上传中…",icon:"loading",duration:99999});var s={title:"",text:n.path,path:n.path,from:a.me.id,to:a.you.id,type:n.data.type,chat_no:n.data.chat_no,per:0};a.chat_list.push(s),a.onChatNextBottom(),a.app.uploadFileTask("api/chat_group/chat_send?XDEBUG_SESSION_START=17577",n,(function(i){t("log",i," at pages/chat_group/chat_group.vue:1131"),s.per=i.per}),(function(){a.onChatNextBottom(),a.app.toastHide(),a.onMsgMoreClose()}))}}))},onInputTypeVoice:function(t){this.input_type="2",this.onAndroidPermiss()},onInputTypeText:function(t){this.input_type="0"},onChatPre:function(){var t=this,i=this,a={user_id:this.user_id,group_id:this.group_id};this.chat_list&&this.chat_list.length>0&&(a.first_id=this.chat_list[0].id,this.loadding=!0,i.app.toastLoading(),this.app.post("api/chat_group/chat_user_pre",(0,o.default)({},a),(function(a){if(a.chat_list.length<=0)return i.app.toastHide(),t.show=!0,t.loadding=!1,void(t.is_top_nomore=!0);var e=null;i.char_page_index--;var o=[];for(var n in a.chat_list){var s=a.chat_list[n];s.char_page_index=i.char_page_index,o[s.id]=s}for(var c in i.chat_list){var r=i.chat_list[c];o[r.id]=r,e||(e=r)}var u=[];for(var p in o)u.push(o[p]);i.chat_list=u,i.scrollToBottomItem(e.id,(function(){for(var t in i.app.toastHide(),i.chat_list)i.chat_list[t].is_hidden=!1})),t.show=!0,t.loadding=!1})))},onChatNext:function(){for(var t=this,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,a=this,e={user_id:this.user_id,me_id:this.me.id,group_id:this.group_id},n=this.chat_list.length-1;n>=0;n--){var s=this.chat_list[n];if(s.id){e.last_id=s.id;break}}this.app.post("api/chat_group/chat_user_next",(0,o.default)({},e),(function(e){var o=[],n=[];for(var s in t.chat_list){var c=t.chat_list[s];c.id&&(o[c.id]=c),c.chat_no&&(n[c.chat_no]=c)}for(var r in e.chat_list){var u=e.chat_list[r];if(!o[u.id])if(u.chat_no){var p=n[u.chat_no];if(p)for(var l in u)p[l]=u[l];else t.chat_list.push(u)}else t.chat_list.push(u)}i&&i(),function(i){var a=0;for(var e in i)i[e].creby==t.user_id&&"0"==i[e].is_read&&a++;return a}(e.chat_list)&&(t.onNewMsg(),setTimeout((function(){a.scrollToBottom()}),300))}))},onPayVideo:function(t){var i=this.app.upload+this.app.ed(t).text;this.app.go("/pages/message/video",{url:i})},onAddLocation:function(t){var i=this;this.app.chooseLocation((function(t){i.app.post("api/chat_group/chat_send",{type:"6",user_id:i.user_id,me_id:i.me.id,text:i.app.toJson(t),group_id:i.chat_group.id},(function(t){i.onChatNextBottom(),i.onMsgMoreClose()}))}))},formatChatText:function(t){for(var i in t){var a=t[i];"6"==a.type&&(a.text=this.app.toObject(a.text)),t[i]=a}return t},onLocation:function(i){var a=this.app.ed(i).text,e=this.app.toObject(a),o=e.latitude,n=e.longitude;o&&n&&o>0&&n>0?uni.openLocation({latitude:e.latitude,longitude:e.longitude,name:e.name,address:e.address,success:function(){t("log","success map"," at pages/chat_group/chat_group.vue:1371")}}):this.app.toast("位置错误")},onNewMsg:function(){},onDetailLong:function(t){this.selected=this.chat_list[this.app.ed(t).index]},onMenuInvoke:function(t){var i=this,a=this.selected,e=this.selected.id,o=t.index,n=this.modal_menu[o];if(this.menu_text=n,"复制"==n){if("0"==a.type){var s=a.text;this.app.copy(s,(function(){i.app.toast("内容已复制")}))}this.selected=null}else if("撤回"==n){if("1"==this.config.is_admin_back_msg&&(this.group_user_me.is_admin||this.group_user_me.is_main))return void this.app.msgSys("确定撤回消息",(function(t){t&&i.app.post("api/chat_group/chat_back",{group_id:i.group_id,id:e,XDEBUG_SESSION_START:12636},(function(t){"0"==t.code?(i.app.toast("撤回成功"),a.is_hidden="1"):i.app.toast("不允许撤回"),i.selected=null}))}));this.selected.from==this.me.id&&this.selected._credate&&this.app.msgSys("确定撤回消息",(function(t){t&&i.app.post("api/chat_group/chat_back",{group_id:i.group_id,id:e,XDEBUG_SESSION_START:12636},(function(t){"0"==t.code?(i.app.toast("撤回成功"),a.is_hidden="1"):i.app.toast("不允许撤回"),i.selected=null}))}))}else"删除"==n?this.app.msgSys("确定删除消息",(function(t){t&&i.app.post("api/chat_group/chat_del",{id:e},(function(t){i.app.toast("删除成功"),a.is_hidden="1",i.selected=null}))})):"多选"==n?this.selected=null:(this.selected=null,this.menu_text="")},onMenuClose:function(){this.selected=null},onAllCopy:function(){var t=this,i="";for(var a in this.chat_list){var e=this.chat_list[a];"1"==e.is_check&&"0"==e.type&&(i+=e.text+"\r\n")}if(i.length>0&&(i=i.substr(0,i.length-1)),i){for(var o in this.app.copy(i,(function(){t.app.toast("内容已复制")})),this.chat_list)this.chat_list[o].is_check="0";this.menu_text=""}else this.app.toast("未选中")},onAllBackCancel:function(){var t=this,i=[];for(var a in this.chat_list)"1"==this.chat_list[a].is_check&&i.push(this.chat_list[a].id);i.length<=0?this.app.toast("未选中"):this.app.msgSys("确定撤回选中消息",(function(a){a&&t.app.post("api/chat_group/chat_back_all",{ids:i,group_id:t.group_id},(function(i){if("0"==i.code){for(var a in t.chat_list){var e=i.data.list;for(var o in e)t.chat_list[a].id==o&&"1"==e[o].state&&(t.chat_list[a].is_hidden="1",t.chat_list[a].is_check="0");"1"==t.chat_list[a].is_check&&(t.chat_list[a].is_check="0")}t.app.toast("撤回成功:"+i.data.count)}else t.app.toast("撤回失败");t.menu_text=""}))}))},onAllDel:function(){var t=this,i=[];for(var a in this.chat_list)"1"==this.chat_list[a].is_check&&i.push(this.chat_list[a].id);i.length<=0?this.app.toast("未选中"):this.app.msgSys("确定删除选中消息",(function(a){a&&t.app.post("api/chat_group/chat_del_all",{ids:i},(function(i){for(var a in t.app.toast("删除成功"),t.chat_list)"1"==t.chat_list[a].is_check&&(t.chat_list[a].is_hidden="1",t.chat_list[a].is_check="0");t.menu_text=""}))}))},onAllSelect:function(){var t=!1;for(var i in this.chat_list)if("1"!=this.chat_list[i].is_check){t=!0;break}if(t)for(var a in this.chat_list)this.chat_list[a].is_check="1";else for(var e in this.chat_list)this.chat_list[e].is_check="0";this.$forceUpdate()},onAllCancel:function(){this.selected=null,this.menu_text=""},onCheckChat:function(t){var i=this.app.ev(t)[0],a=this.app.ed(t).index;this.chat_list[a].is_check=i},onChatNextBottom:function(){var t=this;t.onChatNext((function(){setTimeout((function(){t.scrollToBottom()}),300)}))},onMsgMoreClose:function(t){this.msgMoreType=""},onMsgMoreMores:function(t){"more"!=this.msgMoreType?(this.msgMoreType="more",this.scrollToBottom()):this.msgMoreType=""},onMsgMoreEmoji:function(t){"emoji"!=this.msgMoreType?(this.msgMoreType="emoji",this.scrollToBottom()):this.msgMoreType=""},onEmojiType:function(t){var i=this.app.ed(t).index;for(var a in this.emoji_type)this.emoji_type[a].check="0";this.emoji_type[i].check="1"},onTextEmoji:function(t){var i=this.app.ed(t).index,a=this.app.ed(t).type_index;this.input_type="0";var e=this.emoji_type[a].emoji_list[i].emoji;this.input_text+=e},onAudioCancelH5:function(t){this.audio_status_h5=2,this.input_text_voice_type=0,this.input_text_title="点击 录制语音消息",this.audio_time_loop&&clearInterval(this.audio_time_loop);try{this.$refs.recorder.stop()}catch(t){}},handlerSave:function(){var t=document.createElement("a");t.href=this.recorder.localUrl,t.download="录音",t.click()},handlerOnCahnger:function(){var t=this;if(1==this.audio_status_h5){this.input_text_voice_type=0,this.input_text_title="点击 录制语音消息",this.audio_time_loop&&clearInterval(this.audio_time_loop);try{this.$refs.recorder.stop()}catch(i){}}else this.audio_status_h5=1,h.stop(),this.stopAudioAni(),this.$refs.recorder.start(),this.input_text_voice_type=1,this.input_text_title="点击 发送语音消",this.audio_time=0,this.audio_time_loop&&clearInterval(this.audio_time_loop),this.audio_time_loop=setInterval((function(){t.audio_time++,t.audio_time>60&&(t.audio_time=60)}),1e3)},handlerSuccess:function(i){var a=this,e=this;2!=this.audio_status_h5?(t("log",i," at pages/chat_group/chat_group.vue:1732"),this.recorder=i,i.duration<.5?e.app.toastNone("录制时间过短"):setTimeout((function(){e.app.uploadFileH5("api/chat_group/chat_send",{name:"file",path:i.data,data:{type:"2",type_media:"2",user_id:a.user_id,me_id:a.me.id,duration:i.duration,group_id:a.chat_group.id}},(function(t){"0"==t.code?e.onChatNextBottom():e.app.toast(t.data)}),(function(t){}),(function(t){a.audio_status_h5=0}))}),100)):this.audio_status_h5=0},handlerError:function(t){switch(t){case"101":uni.showModal({content:"当前浏览器版本较低，请更换浏览器使用，推荐在微信中打开。"});break;case"201":uni.showModal({content:"麦克风权限被拒绝，请刷新页面后授权麦克风权限。"});break;default:uni.showModal({content:"未知错误，请刷新页面重试"});break}}},onPageScroll:function(t){var i=this;0!=t.scrollTop||this.loadding||setTimeout((function(){i.onChatPre()}),100)},onNavigationBarButtonTap:function(t){this.app.go("/pages/chat_group/setting",{group_id:this.group_id})}};i.default=v}).call(this,a("0de9")["log"])},b45a:function(t,i,a){"use strict";a.r(i);var e=a("58dc"),o=a.n(e);for(var n in e)["default"].indexOf(n)<0&&function(t){a.d(i,t,(function(){return e[t]}))}(n);i["default"]=o.a},bf60:function(t,i,a){"use strict";var e=a("ed6d"),o=a.n(e);o.a},c503:function(t,i,a){"use strict";a.d(i,"b",(function(){return o})),a.d(i,"c",(function(){return n})),a.d(i,"a",(function(){return e}));var e={viveLoadmore:a("128c").default,viveModalMenu:a("3232").default,mumuRecorder:a("0611").default},o=function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("v-uni-view",{},["1"==t.input_text_voice_type?e("v-uni-view",{staticClass:"bottom full tui-operation-inpupt-voice"}):t._e(),"1"==t.input_text_voice_type&&"0"==t.input_type_h5?e("v-uni-view",{staticClass:"bottom full "},[e("div",{staticClass:"full text-center-hv"},[e("v-uni-view",{staticClass:"input-text-voice-cancel"},[e("v-uni-view",{staticClass:"  text-center-hv cols",class:["1"==t.input_text_cancel_type?"bg-circle":"bg-circle-cancel"]},["0"==t.input_text_cancel_type?e("tui-icon",{attrs:{name:"back",size:26,color:"#333333"}}):t._e(),"1"==t.input_text_cancel_type?e("tui-icon",{attrs:{name:"back",size:26,color:"#ffffff"}}):t._e(),e("v-uni-text",[t._v("取 消")]),e("v-uni-view",{staticClass:"text-xs pt-sm"},[t._v(t._s(t.audio_time)+" /60s")])],1)],1)],1)]):t._e(),"1"==t.input_text_voice_type&&"1"==t.input_type_h5?e("v-uni-view",{staticClass:"bottom full "},[e("div",{staticClass:"full text-center-hv"},[e("v-uni-view",{staticClass:"input-text-voice-cancel",on:{click:function(i){if(!i.type.indexOf("key")&&t._k(i.keyCode,"sop",void 0,i.key,void 0))return null;arguments[0]=i=t.$handleEvent(i),t.onAudioCancelH5.apply(void 0,arguments)}}},[e("v-uni-view",{staticClass:"bg-circle  text-center-hv cols"},[e("tui-icon",{attrs:{name:"back",size:26,color:"#ffffff"}}),e("v-uni-text",[t._v("点击取消")]),e("v-uni-view",{staticClass:"text-xs pt-sm"},[t._v(t._s(t.audio_time)+" /60s")])],1)],1)],1)]):t._e(),"1"==t.is_friend?e("v-uni-view",{staticClass:"bottom cols bottom-msg-options"},[e("v-uni-view",{staticClass:"text-center-hv  rows  full-width bottom-msg-input"},["0"==t.input_type?e("v-uni-view",{staticClass:"tui-voice tui-pl tui-pr ",attrs:{"hover-class":"tui-opcity","hover-stay-time":150},on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.onInputTypeVoice.apply(void 0,arguments)}}},[e("tui-icon",{attrs:{name:"news",size:34,color:"#666"}})],1):t._e(),"2"==t.input_type?e("v-uni-view",{staticClass:"tui-voice tui-pl tui-pr ",attrs:{"hover-class":"tui-opcity","hover-stay-time":150},on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.onInputTypeText.apply(void 0,arguments)}}},[e("tui-icon",{attrs:{name:"edit",size:34,color:"#666"}})],1):t._e(),"0"==t.input_type?e("v-uni-input",{staticClass:"tui-chat-input btn-send-speek-item",attrs:{value:t.input_text,"confirm-type":"send"},on:{input:function(i){arguments[0]=i=t.$handleEvent(i),t.onInputText.apply(void 0,arguments)},confirm:function(i){arguments[0]=i=t.$handleEvent(i),t.send.apply(void 0,arguments)}}}):t._e(),"2"==t.input_type&&"0"==t.input_type_h5?e("v-uni-view",{staticClass:"tui-chat-input text-center-hv btn-send-speek-item",class:["1"==t.input_text_voice_type?"btn-send-speek":""],on:{touchstart:function(i){arguments[0]=i=t.$handleEvent(i),t.onAudioStart.apply(void 0,arguments)},touchend:function(i){arguments[0]=i=t.$handleEvent(i),t.onAudioEnd.apply(void 0,arguments)},touchmove:function(i){arguments[0]=i=t.$handleEvent(i),t.onAudioMove.apply(void 0,arguments)},touchcancel:function(i){arguments[0]=i=t.$handleEvent(i),t.onAudioCancel.apply(void 0,arguments)}}},[t._v(t._s(t.input_text_title))]):t._e(),"2"==t.input_type&&"1"==t.input_type_h5?e("v-uni-view",{staticClass:"tui-chat-input text-center-hv btn-send-speek-item",class:["1"==t.input_text_voice_type?"btn-send-speek":""],on:{click:function(i){i.stopPropagation(),arguments[0]=i=t.$handleEvent(i),t.handlerOnCahnger.apply(void 0,arguments)}}},[t._v(t._s(t.input_text_title))]):t._e(),e("v-uni-view",{staticClass:"tui-pl tui-pr ",attrs:{"hover-class":"tui-opcity","hover-stay-time":150},on:{click:function(i){i.stopPropagation(),arguments[0]=i=t.$handleEvent(i),t.onMsgMoreEmoji.apply(void 0,arguments)}}},[e("tui-icon",{attrs:{name:"imface",size:28,color:"#666"}})],1),e("v-uni-view",{directives:[{name:"show",rawName:"v-show",value:null==t.input_text||""==t.input_text,expression:"input_text==null || input_text == ''"}],staticClass:"tui-pr ",attrs:{"hover-class":"tui-opcity","hover-stay-time":150},on:{click:function(i){i.stopPropagation(),arguments[0]=i=t.$handleEvent(i),t.onMsgMoreMores.apply(void 0,arguments)}}},[e("tui-icon",{attrs:{name:"add",size:30,color:"#666"}})],1),e("v-uni-view",{directives:[{name:"show",rawName:"v-show",value:null!=t.input_text&&""!=t.input_text,expression:"input_text!=null && input_text != ''"}],staticClass:"tui-pr ",attrs:{"hover-class":"tui-opcity","hover-stay-time":150},on:{click:function(i){i.stopPropagation(),arguments[0]=i=t.$handleEvent(i),t.send.apply(void 0,arguments)}}},[e("tui-icon",{attrs:{name:"send",size:30,color:"#666"}})],1)],1),"more"==t.msgMoreType?e("v-uni-view",{staticClass:"msg-more-type-box "},[e("v-uni-view",{staticClass:"msg-more-type-more rows-wrap"},[e("v-uni-view",{staticClass:"msg-more-item text-center-hv cols",attrs:{"hover-class":"tui-opcity","hover-stay-time":150},on:{click:function(i){i.stopPropagation(),arguments[0]=i=t.$handleEvent(i),t.onAddLocation.apply(void 0,arguments)}}},[e("v-uni-view",{staticClass:"cols"},[e("tui-icon",{attrs:{name:"gps",size:50,color:"#666"}}),e("v-uni-view",{staticClass:"text-center-h text-sm text-color-9 mt-xs"},[t._v("位置")])],1)],1),e("v-uni-view",{staticClass:"msg-more-item text-center-hv cols",attrs:{"hover-class":"tui-opcity","hover-stay-time":150},on:{click:function(i){i.stopPropagation(),arguments[0]=i=t.$handleEvent(i),t.onAddImg.apply(void 0,arguments)}}},[e("v-uni-view",{staticClass:"cols"},[e("tui-icon",{attrs:{name:"pic",size:50,color:"#666"}}),e("v-uni-view",{staticClass:"text-center-h text-sm text-color-9 mt-xs"},[t._v("图片")])],1)],1),e("v-uni-view",{staticClass:"msg-more-item text-center-hv cols",attrs:{"hover-class":"tui-opcity","hover-stay-time":150},on:{click:function(i){i.stopPropagation(),arguments[0]=i=t.$handleEvent(i),t.onAddVideo.apply(void 0,arguments)}}},[e("v-uni-view",{staticClass:"cols"},[e("tui-icon",{attrs:{name:"video",size:50,color:"#666"}}),e("v-uni-view",{staticClass:"text-center-h text-sm text-color-9 mt-xs"},[t._v("视频")])],1)],1)],1)],1):t._e(),"emoji"==t.msgMoreType?e("v-uni-view",{staticClass:"msg-more-type-box "},[e("v-uni-scroll-view",{staticClass:" scroll-view-h mt mb ml mr",attrs:{"scroll-x":"true","show-scrollbar":"false"}},t._l(t.emoji_type,(function(i,a){return e("v-uni-view",{staticClass:"scroll-view-h-item msg-more-emoji-type text-center-h text-color-9",class:["1"==i.check?"msg-more-emoji-action":""],attrs:{"data-index":a,"hover-class":"tui-opcity","hover-stay-time":150},on:{click:function(i){i.stopPropagation(),arguments[0]=i=t.$handleEvent(i),t.onEmojiType.apply(void 0,arguments)}}},[e("v-uni-text",[t._v(t._s(i.emoji))])],1)})),1),e("v-uni-scroll-view",{staticClass:"msg-more-type-emoji-box",attrs:{"scroll-y":"true"}},[t._l(t.emoji_type,(function(i,a){return"1"==i.check?e("v-uni-view",{staticClass:"msg-more-type-emoji rows-wrap"},t._l(i.emoji_list,(function(i,o){return e("v-uni-view",{staticClass:"msg-more-emoji text-center-hv cols",attrs:{"data-type_index":a,"data-index":o,"hover-class":"tui-opcity","hover-stay-time":150},on:{click:function(i){i.stopPropagation(),arguments[0]=i=t.$handleEvent(i),t.onTextEmoji.apply(void 0,arguments)}}},[e("v-uni-view",{staticClass:"cols"},[e("v-uni-view",{staticClass:"text-center-h text-color-9 "},[t._v(t._s(i.emoji))])],1)],1)})),1):t._e()})),e("v-uni-view",{staticStyle:{height:"200rpx"}})],2)],1):t._e()],1):t._e(),"多选"==t.menu_text?e("v-uni-view",{staticClass:"bottom text-center-v bg-width",staticStyle:{"z-index":"1000",height:"100rpx"}},[e("v-uni-view",{staticClass:"full-width box-wrap-space-around"},[e("v-uni-button",{on:{click:function(i){i.stopPropagation(),arguments[0]=i=t.$handleEvent(i),t.onAllCopy.apply(void 0,arguments)}}},[t._v("复制")]),e("v-uni-button",{on:{click:function(i){i.stopPropagation(),arguments[0]=i=t.$handleEvent(i),t.onAllBackCancel.apply(void 0,arguments)}}},[t._v("撤回")]),e("v-uni-button",{on:{click:function(i){i.stopPropagation(),arguments[0]=i=t.$handleEvent(i),t.onAllDel.apply(void 0,arguments)}}},[t._v("删除")]),e("v-uni-button",{on:{click:function(i){i.stopPropagation(),arguments[0]=i=t.$handleEvent(i),t.onAllSelect.apply(void 0,arguments)}}},[t._v("全选")]),e("v-uni-button",{on:{click:function(i){i.stopPropagation(),arguments[0]=i=t.$handleEvent(i),t.onAllCancel.apply(void 0,arguments)}}},[t._v("取消")])],1)],1):t._e(),e("v-uni-view",{staticClass:"chat-content",on:{click:function(i){i.stopPropagation(),arguments[0]=i=t.$handleEvent(i),t.onMsgMoreClose.apply(void 0,arguments)}}},[e("tui-loadmore",{attrs:{visible:t.loadding,index:3,type:"primary",text:" "}}),t.is_top_nomore?e("v-uni-view",{staticClass:"tui-chat-center text-top-nomore"},[t._v("没有更多了")]):t._e(),t._l(t.chat_list,(function(i,o){return e("v-uni-view",{key:o,staticClass:"m-item ",attrs:{id:"chat"+i.id}},[i.from!=t.me.id&&1!=i.is_hidden?e("v-uni-view",{staticClass:"tui-chat-left"},[e("v-uni-image",{staticClass:"tui-user-pic tui-right",attrs:{src:i.avatar,"data-id":i.creby,"data-user_type":t.you.user_type},on:{click:function(i){i.stopPropagation(),arguments[0]=i=t.$handleEvent(i),t.onAvatar.apply(void 0,arguments)}}}),e("v-uni-view",{staticClass:"cols full-width"},[e("v-uni-view",{staticClass:"text-color-9 text-xs"},[t._v(t._s(i.nickname)+" "+t._s(i.credate))]),e("v-uni-view",{staticClass:"tui-chat-left-padding"},["0"==i.type?e("v-uni-text",{staticClass:"tui-chatbox tui-chatbox-left",attrs:{"data-index":o},on:{longpress:function(i){arguments[0]=i=t.$handleEvent(i),t.onDetailLong.apply(void 0,arguments)}}},[t._v(t._s(i.text))]):t._e(),"1"==i.type?e("v-uni-view",{staticClass:"tui-chatbox tui-chatbox-left tui-chatbox-video",attrs:{"data-index":o,"data-src":t.app.upload+i.text},on:{longpress:function(i){arguments[0]=i=t.$handleEvent(i),t.onDetailLong.apply(void 0,arguments)},click:function(i){i.stopPropagation(),arguments[0]=i=t.$handleEvent(i),t.previewImage.apply(void 0,arguments)}}},[e("v-uni-view",{staticClass:" text-center-hv "},[e("v-uni-image",{staticClass:"img-chat",attrs:{src:t.app.upload+i.text,mode:"widthFix"}})],1)],1):t._e(),"2"==i.type?e("v-uni-view",{staticClass:"rows",attrs:{"data-index":o},on:{longpress:function(i){arguments[0]=i=t.$handleEvent(i),t.onDetailLong.apply(void 0,arguments)},click:function(i){i.stopPropagation(),arguments[0]=i=t.$handleEvent(i),t.onPayAudio.apply(void 0,arguments)}}},[e("v-uni-view",{staticClass:"tui-chatbox tui-chatbox-left tui-chatbox-max",class:{"tui-chatbox-play-left":t.index_play_msg==o&&1==t.index_play},style:{width:100+4*(i.duration<=0?1:i.duration>60?60:i.duration)+"rpx"},attrs:{"data-text":i.text}},[e("v-uni-view",{staticClass:"box"},[e("v-uni-view",{staticClass:"rows"},[e("v-uni-view",{staticClass:" text-center-hv chat-audio-left"},["1"==i.is_play_audio?e("v-uni-image",{staticClass:"chat-audio",attrs:{src:"/static/image/icon_audio_left.gif"}}):e("v-uni-image",{staticClass:"chat-audio",attrs:{src:"/static/image/icon_audio_left.png"}})],1),e("v-uni-view",{staticClass:" text-center-hv"},[e("v-uni-view",[t._v(t._s(i.duration<=0?1:i.duration>60?60:i.duration)+'"')])],1)],1)],1)],1),"1"!=i.is_click?e("v-uni-view",{staticClass:"text-center-hv pl-sm",staticStyle:{margin:"0 0 0 0rpx"}},[e("tui-badge",{attrs:{type:"danger",dot:!0}})],1):t._e()],1):t._e(),"3"==i.type?e("v-uni-view",{staticClass:"tui-chatbox tui-chatbox-left tui-chatbox-video",attrs:{"data-index":o,"data-text":i.text},on:{longpress:function(i){arguments[0]=i=t.$handleEvent(i),t.onDetailLong.apply(void 0,arguments)},click:function(i){i.stopPropagation(),arguments[0]=i=t.$handleEvent(i),t.onPayVideo.apply(void 0,arguments)}}},[e("v-uni-view",{staticClass:"text-center-hv",class:[i.img?"":"chat-video-box"]},[e("v-uni-image",{staticClass:"chat-video-cover",attrs:{src:t.app.upload+i.img,mode:"widthFix"}}),e("v-uni-view",{staticClass:"chat-video-play-img-box text-center-hv"},[e("v-uni-image",{staticClass:"chat-video",attrs:{src:a("d097")}})],1)],1)],1):t._e(),"6"==i.type?e("v-uni-view",{staticClass:"tui-chatbox tui-chatbox-location tui-chatbox-left tui-chatbox-video",attrs:{"data-index":o,"data-text":i.text},on:{longpress:function(i){arguments[0]=i=t.$handleEvent(i),t.onDetailLong.apply(void 0,arguments)},click:function(i){i.stopPropagation(),arguments[0]=i=t.$handleEvent(i),t.onLocation.apply(void 0,arguments)}}},[e("v-uni-view",{staticClass:"text-inline pt-sm pl-sm "},[t._v(t._s(t.formatLocation(i)))]),e("v-uni-view",{staticClass:"text-inline text-sm pb-sm pl-sm "},[t._v(t._s(t.formatLocationDetail(i)))]),e("v-uni-view",{staticClass:"chat-location text-center-hv"},[e("tui-icon",{attrs:{name:"gps",size:40,color:"#666"}})],1)],1):t._e()],1)],1),"多选"==t.menu_text?e("v-uni-view",{staticClass:"pl"},[e("v-uni-checkbox-group",{attrs:{name:"is_check","data-index":o},on:{change:function(i){arguments[0]=i=t.$handleEvent(i),t.onCheckChat.apply(void 0,arguments)}}},[e("v-uni-label",{staticClass:"checkbox"},[e("v-uni-checkbox",{attrs:{value:"1",checked:"1"==i.is_check}})],1)],1)],1):t._e()],1):t._e(),i.from==t.me.id&&1!=i.is_hidden?e("v-uni-view",{staticClass:"tui-chat-right"},[e("v-uni-view",{staticClass:"cols full-width"},[e("v-uni-view",{staticClass:"text-color-9 text-xs tui-chat-right-time"},[t._v(t._s(i.credate)+" "+t._s(i.nickname))]),e("v-uni-view",{staticClass:"tui-chat-right-padding"},["0"==i.type?e("v-uni-text",{staticClass:"tui-chatbox tui-chatbox-right",attrs:{"data-index":o},on:{longpress:function(i){arguments[0]=i=t.$handleEvent(i),t.onDetailLong.apply(void 0,arguments)}}},[t._v(t._s(i.text))]):t._e(),"1"==i.type?e("v-uni-view",{staticClass:"tui-chatbox tui-chatbox-right tui-chatbox-video rows relative",attrs:{"data-index":o,"data-src":t.app.upload+i.text},on:{longpress:function(i){arguments[0]=i=t.$handleEvent(i),t.onDetailLong.apply(void 0,arguments)},click:function(i){i.stopPropagation(),arguments[0]=i=t.$handleEvent(i),t.previewImage.apply(void 0,arguments)}}},[i.per&&i.per<100?e("v-uni-view",{staticClass:"cols text-center-hv pr-sm pl-sm absolute ",staticStyle:{left:"0",top:"0",bottom:"0","margin-left":"-100rpx"}},[e("v-uni-view",[e("vive-loadmore",{attrs:{visible:!0,text:""}})],1),e("v-uni-view",{staticClass:"circle-per-text"},[t._v(t._s(i.per)+"%")])],1):t._e(),e("v-uni-view",{staticClass:" text-center-hv "},[i.path?e("v-uni-image",{staticClass:"img-chat",attrs:{src:i.path,mode:"widthFix"}}):e("v-uni-image",{staticClass:"img-chat",attrs:{src:t.app.upload+i.text,mode:"widthFix"}})],1)],1):t._e(),"2"==i.type?e("v-uni-view",{staticClass:"rows",attrs:{"data-index":o},on:{longpress:function(i){arguments[0]=i=t.$handleEvent(i),t.onDetailLong.apply(void 0,arguments)},click:function(i){i.stopPropagation(),arguments[0]=i=t.$handleEvent(i),t.onPayAudio.apply(void 0,arguments)}}},[e("v-uni-view",{staticClass:"tui-chatbox tui-chatbox-right tui-chatbox-max",class:{"tui-chatbox-play-right":t.index_play_msg==o&&1==t.index_play},style:{width:100+4*(i.duration<=0?1:i.duration>60?60:i.duration)+"rpx"},attrs:{"data-text":i.text}},[e("v-uni-view",{staticClass:"box"},[e("v-uni-view"),e("v-uni-view",{staticClass:"rows "},[e("v-uni-view",{staticClass:" text-center-hv "},[e("v-uni-view",[t._v(t._s(i.duration<=0?1:i.duration>60?60:i.duration)+'"')])],1),e("v-uni-view",{staticClass:" text-center-hv chat-audio-right"},["1"==i.is_play_audio?e("v-uni-image",{staticClass:"chat-audio",attrs:{src:"/static/image/icon_audio_right.gif"}}):e("v-uni-image",{staticClass:"chat-audio",attrs:{src:"/static/image/icon_audio_right.png"}})],1)],1)],1)],1)],1):t._e(),"3"==i.type?e("v-uni-view",{staticClass:"tui-chatbox tui-chatbox-right tui-chatbox-video",attrs:{"data-index":o,"data-text":i.text},on:{longpress:function(i){arguments[0]=i=t.$handleEvent(i),t.onDetailLong.apply(void 0,arguments)},click:function(i){i.stopPropagation(),arguments[0]=i=t.$handleEvent(i),t.onPayVideo.apply(void 0,arguments)}}},[i.per&&i.per<100?e("v-uni-view",{staticClass:"cols text-center-hv pr-sm pl-sm absolute ",staticStyle:{left:"0",top:"0",bottom:"0","margin-left":"-100rpx"}},[e("v-uni-view",[e("vive-loadmore",{attrs:{visible:!0,text:""}})],1),e("v-uni-view",{staticClass:"circle-per-text"},[t._v(t._s(i.per)+"%")])],1):t._e(),e("v-uni-view",{staticClass:" text-center-hv",class:[i.img?"":"chat-video-box"]},[e("v-uni-image",{staticClass:"chat-video-cover",attrs:{src:t.app.upload+i.img,mode:"widthFix"}}),e("v-uni-view",{staticClass:"chat-video-play-img-box text-center-hv"},[e("v-uni-image",{staticClass:"chat-video",attrs:{src:a("d097")}})],1)],1)],1):t._e(),"6"==i.type?e("v-uni-view",{staticClass:"tui-chatbox tui-chatbox-location tui-chatbox-right tui-chatbox-video",attrs:{"data-index":o,"data-text":i.text},on:{longpress:function(i){arguments[0]=i=t.$handleEvent(i),t.onDetailLong.apply(void 0,arguments)},click:function(i){i.stopPropagation(),arguments[0]=i=t.$handleEvent(i),t.onLocation.apply(void 0,arguments)}}},[e("v-uni-view",{staticClass:"text-inline pt-sm pl-sm "},[t._v(t._s(t.formatLocation(i)))]),e("v-uni-view",{staticClass:"text-inline text-sm pb-sm pl-sm "},[t._v(t._s(t.formatLocationDetail(i)))]),e("v-uni-view",{staticClass:"chat-location text-center-hv"},[e("tui-icon",{attrs:{name:"gps",size:40,color:"#666"}})],1)],1):t._e()],1)],1),e("v-uni-image",{staticClass:"tui-user-pic tui-left",attrs:{src:i.avatar,"data-id":i.creby,"data-user_type":t.me.user_type},on:{click:function(i){i.stopPropagation(),arguments[0]=i=t.$handleEvent(i),t.onAvatar.apply(void 0,arguments)}}}),"多选"==t.menu_text?e("v-uni-view",{staticClass:"pl"},[e("v-uni-checkbox-group",{attrs:{name:"is_check","data-index":o},on:{change:function(i){arguments[0]=i=t.$handleEvent(i),t.onCheckChat.apply(void 0,arguments)}}},[e("v-uni-label",{staticClass:"checkbox"},[e("v-uni-checkbox",{attrs:{value:"1",checked:"1"==i.is_check}})],1)],1)],1):t._e()],1):t._e()],1)}))],2),""!=t.msgMoreType?e("v-uni-view",{staticStyle:{height:"500rpx"}}):t._e(),e("v-uni-view",{staticStyle:{height:"150rpx"}}),e("v-uni-view",{staticClass:"tui-safearea-bottom"}),e("vive-modal-menu",{attrs:{hidden:null==t.selected,menu:t.modal_menu},on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.onMenuInvoke.apply(void 0,arguments)},close:function(i){arguments[0]=i=t.$handleEvent(i),t.onMenuClose.apply(void 0,arguments)}}}),e("v-uni-view",[e("mumu-recorder",{ref:"recorder",on:{success:function(i){arguments[0]=i=t.$handleEvent(i),t.handlerSuccess.apply(void 0,arguments)},error:function(i){arguments[0]=i=t.$handleEvent(i),t.handlerError.apply(void 0,arguments)}}})],1)],1)},n=[]},ed6d:function(t,i,a){var e=a("12e0");e.__esModule&&(e=e.default),"string"===typeof e&&(e=[[t.i,e,""]]),e.locals&&(t.exports=e.locals);var o=a("4f06").default;o("30c490aa",e,!0,{sourceMap:!1,shadowMode:!1})}}]);