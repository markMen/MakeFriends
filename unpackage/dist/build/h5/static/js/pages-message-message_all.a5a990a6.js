(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-message-message_all"],{1304:function(t,i,a){"use strict";a.r(i);var e=a("7ce4"),n=a("6125");for(var o in n)["default"].indexOf(o)<0&&function(t){a.d(i,t,(function(){return n[t]}))}(o);a("2c69");var s=a("f0c5"),r=Object(s["a"])(n["default"],e["b"],e["c"],!1,null,"5ab53500",null,!1,e["a"],void 0);i["default"]=r.exports},"1cd3":function(t,i,a){"use strict";var e=a("d8bc"),n=a.n(e);n.a},2089:function(t,i,a){"use strict";a.r(i);var e=a("2b05"),n=a.n(e);for(var o in e)["default"].indexOf(o)<0&&function(t){a.d(i,t,(function(){return e[t]}))}(o);i["default"]=n.a},"227f":function(t,i,a){var e=a("fca5");e.__esModule&&(e=e.default),"string"===typeof e&&(e=[[t.i,e,""]]),e.locals&&(t.exports=e.locals);var n=a("4f06").default;n("36cefb94",e,!0,{sourceMap:!1,shadowMode:!1})},"258e":function(t,i,a){var e=a("24fb");i=e(!1),i.push([t.i,".tui-loadmore[data-v-5ab53500]{width:48%;margin:1.5em auto;line-height:1.5em;font-size:%?24?%;text-align:center}.tui-loading-1[data-v-5ab53500]{margin:0 5px;width:20px;height:20px;display:inline-block;vertical-align:middle;-webkit-animation:a-data-v-5ab53500 1s steps(12) infinite;animation:a-data-v-5ab53500 1s steps(12) infinite;background:transparent url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMjAiIGhlaWdodD0iMTIwIiB2aWV3Qm94PSIwIDAgMTAwIDEwMCI+PHBhdGggZmlsbD0ibm9uZSIgZD0iTTAgMGgxMDB2MTAwSDB6Ii8+PHJlY3Qgd2lkdGg9IjciIGhlaWdodD0iMjAiIHg9IjQ2LjUiIHk9IjQwIiBmaWxsPSIjRTlFOUU5IiByeD0iNSIgcnk9IjUiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDAgLTMwKSIvPjxyZWN0IHdpZHRoPSI3IiBoZWlnaHQ9IjIwIiB4PSI0Ni41IiB5PSI0MCIgZmlsbD0iIzk4OTY5NyIgcng9IjUiIHJ5PSI1IiB0cmFuc2Zvcm09InJvdGF0ZSgzMCAxMDUuOTggNjUpIi8+PHJlY3Qgd2lkdGg9IjciIGhlaWdodD0iMjAiIHg9IjQ2LjUiIHk9IjQwIiBmaWxsPSIjOUI5OTlBIiByeD0iNSIgcnk9IjUiIHRyYW5zZm9ybT0icm90YXRlKDYwIDc1Ljk4IDY1KSIvPjxyZWN0IHdpZHRoPSI3IiBoZWlnaHQ9IjIwIiB4PSI0Ni41IiB5PSI0MCIgZmlsbD0iI0EzQTFBMiIgcng9IjUiIHJ5PSI1IiB0cmFuc2Zvcm09InJvdGF0ZSg5MCA2NSA2NSkiLz48cmVjdCB3aWR0aD0iNyIgaGVpZ2h0PSIyMCIgeD0iNDYuNSIgeT0iNDAiIGZpbGw9IiNBQkE5QUEiIHJ4PSI1IiByeT0iNSIgdHJhbnNmb3JtPSJyb3RhdGUoMTIwIDU4LjY2IDY1KSIvPjxyZWN0IHdpZHRoPSI3IiBoZWlnaHQ9IjIwIiB4PSI0Ni41IiB5PSI0MCIgZmlsbD0iI0IyQjJCMiIgcng9IjUiIHJ5PSI1IiB0cmFuc2Zvcm09InJvdGF0ZSgxNTAgNTQuMDIgNjUpIi8+PHJlY3Qgd2lkdGg9IjciIGhlaWdodD0iMjAiIHg9IjQ2LjUiIHk9IjQwIiBmaWxsPSIjQkFCOEI5IiByeD0iNSIgcnk9IjUiIHRyYW5zZm9ybT0icm90YXRlKDE4MCA1MCA2NSkiLz48cmVjdCB3aWR0aD0iNyIgaGVpZ2h0PSIyMCIgeD0iNDYuNSIgeT0iNDAiIGZpbGw9IiNDMkMwQzEiIHJ4PSI1IiByeT0iNSIgdHJhbnNmb3JtPSJyb3RhdGUoLTE1MCA0NS45OCA2NSkiLz48cmVjdCB3aWR0aD0iNyIgaGVpZ2h0PSIyMCIgeD0iNDYuNSIgeT0iNDAiIGZpbGw9IiNDQkNCQ0IiIHJ4PSI1IiByeT0iNSIgdHJhbnNmb3JtPSJyb3RhdGUoLTEyMCA0MS4zNCA2NSkiLz48cmVjdCB3aWR0aD0iNyIgaGVpZ2h0PSIyMCIgeD0iNDYuNSIgeT0iNDAiIGZpbGw9IiNEMkQyRDIiIHJ4PSI1IiByeT0iNSIgdHJhbnNmb3JtPSJyb3RhdGUoLTkwIDM1IDY1KSIvPjxyZWN0IHdpZHRoPSI3IiBoZWlnaHQ9IjIwIiB4PSI0Ni41IiB5PSI0MCIgZmlsbD0iI0RBREFEQSIgcng9IjUiIHJ5PSI1IiB0cmFuc2Zvcm09InJvdGF0ZSgtNjAgMjQuMDIgNjUpIi8+PHJlY3Qgd2lkdGg9IjciIGhlaWdodD0iMjAiIHg9IjQ2LjUiIHk9IjQwIiBmaWxsPSIjRTJFMkUyIiByeD0iNSIgcnk9IjUiIHRyYW5zZm9ybT0icm90YXRlKC0zMCAtNS45OCA2NSkiLz48L3N2Zz4=) no-repeat;background-size:100%}@-webkit-keyframes a-data-v-5ab53500{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}@keyframes a-data-v-5ab53500{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}.tui-loadmore-tips[data-v-5ab53500]{display:inline-block;vertical-align:middle}.tui-loading-2[data-v-5ab53500]{width:%?28?%;height:%?28?%;border:1px solid #8f8d8e;border-radius:50%;margin:0 6px;display:inline-block;vertical-align:middle;-webkit-clip-path:polygon(0 0,100% 0,100% 30%,0 30%);clip-path:polygon(0 0,100% 0,100% 30%,0 30%);-webkit-animation:rotate-data-v-5ab53500 1s linear infinite;animation:rotate-data-v-5ab53500 1s linear infinite}@-webkit-keyframes rotate-data-v-5ab53500{from{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}@keyframes rotate-data-v-5ab53500{from{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}.tui-loading-3[data-v-5ab53500]{display:inline-block;margin:0 6px;vertical-align:middle;width:%?28?%;height:%?28?%;background:0 0;border-radius:50%;border:2px solid;border-color:#e5e5e5 #e5e5e5 #e5e5e5 #8f8d8e;-webkit-animation:tui-rotate-data-v-5ab53500 .7s linear infinite;animation:tui-rotate-data-v-5ab53500 .7s linear infinite}.tui-loading-3.tui-loading-primary[data-v-5ab53500]{border-color:#e5e5e5 #e5e5e5 #e5e5e5 #5677fc}.tui-loading-3.tui-loading-green[data-v-5ab53500]{border-color:#e5e5e5 #e5e5e5 #e5e5e5 #19be6b}.tui-loading-3.tui-loading-orange[data-v-5ab53500]{border-color:#e5e5e5 #e5e5e5 #e5e5e5 #ff7900}.tui-loading-3.tui-loading-red[data-v-5ab53500]{border-color:#ededed #ededed #ededed #ed3f14}@-webkit-keyframes tui-rotate-data-v-5ab53500{0%{-webkit-transform:rotate(0);transform:rotate(0)}100%{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}@keyframes tui-rotate-data-v-5ab53500{0%{-webkit-transform:rotate(0);transform:rotate(0)}100%{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}",""]),t.exports=i},"25c3":function(t,i,a){"use strict";a.r(i);var e=a("cecc"),n=a.n(e);for(var o in e)["default"].indexOf(o)<0&&function(t){a.d(i,t,(function(){return e[t]}))}(o);i["default"]=n.a},"2ac4":function(t,i,a){"use strict";a("7a82"),Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0,a("a9e3");var e={name:"tuiLoadmore",props:{text:{type:String,default:"正在加载..."},visible:{type:Boolean,default:!1},index:{type:Number,default:1},type:{type:String,default:""}}};i.default=e},"2b05":function(t,i,a){"use strict";a("7a82"),Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var e={name:"tuiBadge",props:{type:{type:String,default:"primary"},size:{type:String,default:""},dot:{type:Boolean,default:!1},visible:{type:Boolean,default:!0}}};i.default=e},"2c69":function(t,i,a){"use strict";var e=a("5f08"),n=a.n(e);n.a},"3f74":function(t,i,a){"use strict";a.d(i,"b",(function(){return e})),a.d(i,"c",(function(){return n})),a.d(i,"a",(function(){}));var e=function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("v-uni-view",{},["1"==t.input_text_voice_type?e("v-uni-view",{staticClass:"bottom full tui-operation-inpupt-voice"}):t._e(),"1"==t.input_text_voice_type?e("v-uni-view",{staticClass:"bottom full "},[e("div",{staticClass:"full text-center-hv"},[e("v-uni-view",{staticClass:"input-text-voice-cancel"},["0"==t.input_text_cancel_type?e("v-uni-view",{staticClass:"bg-circle-cancel  text-center-hv cols"},[e("tui-icon",{attrs:{name:"back",size:26,color:"#333333"}}),e("v-uni-text",[t._v("取 消")]),e("v-uni-view",{staticClass:"text-xs pt-sm"},[t._v(t._s(t.audio_time)+" /60s")])],1):t._e(),"1"==t.input_text_cancel_type?e("v-uni-view",{staticClass:"bg-circle  text-center-hv cols"},[e("tui-icon",{attrs:{name:"back",size:26,color:"#ffffff"}}),e("v-uni-text",[t._v("取 消")]),e("v-uni-view",{staticClass:"text-xs pt-sm"},[t._v(t._s(t.audio_time)+" /60s")])],1):t._e()],1)],1)]):t._e(),e("v-uni-view",{staticClass:"tui-chat-content"},[e("tui-loadmore",{attrs:{visible:t.loadding,index:3,type:"primary",text:" "}}),e("v-uni-view",{staticClass:"content",style:{height:t.style.contentViewHeight+"px"},attrs:{id:"content"}},[e("v-uni-scroll-view",{style:{height:t.style.contentViewHeight+"px"},attrs:{"scroll-top":t.scrollTop,id:"scrollview","scroll-y":"true","enable-back-to-top":"true"},on:{scrolltoupper:function(i){arguments[0]=i=t.$handleEvent(i),t.onChatPre.apply(void 0,arguments)}}},t._l(t.chat_list,(function(i,n){return e("v-uni-view",{key:n,staticClass:"m-item"},[i.from==i.creby?e("v-uni-view",{staticClass:"tui-chat-left"},[e("v-uni-image",{staticClass:"tui-user-pic tui-right",attrs:{src:i.avatar,"data-id":i.creby},on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.onAvatar.apply(void 0,arguments)}}}),"0"==i.type?e("v-uni-view",{staticClass:"tui-chatbox tui-chatbox-left"},[t._v(t._s(i.text))]):t._e(),"1"==i.type?e("v-uni-view",{staticClass:"tui-chatbox tui-chatbox-left tui-chatbox-video",attrs:{"data-src":t.app.upload+i.text},on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.previewImage.apply(void 0,arguments)}}},[e("v-uni-view",{staticClass:" text-center-hv "},[e("v-uni-image",{staticClass:"img-chat",attrs:{src:t.app.upload+i.text,mode:"widthFix"}})],1)],1):t._e(),"2"==i.type?e("v-uni-view",{staticClass:"tui-chatbox tui-chatbox-left  ",class:{"tui-chatbox-play-left":t.index_play_msg==n&&1==t.index_play},style:{width:100+4*(i.duration<=0?1:i.duration>60?60:i.duration)+"rpx"},attrs:{"data-index":n,"data-text":i.text},on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.onPayAudio.apply(void 0,arguments)}}},[e("v-uni-view",{staticClass:"box"},[e("v-uni-view",{staticClass:"rows"},[e("v-uni-view",{staticClass:" text-center-hv chat-audio-left"},[e("v-uni-image",{staticClass:"chat-audio",attrs:{src:a("ea22")}})],1),e("v-uni-view",{staticClass:" text-center-hv"},[e("v-uni-view",[t._v(t._s(i.duration<=0?1:i.duration>60?60:i.duration)+'"')])],1)],1),e("v-uni-view")],1)],1):t._e(),"3"==i.type?e("v-uni-view",{staticClass:"tui-chatbox tui-chatbox-left tui-chatbox-video",attrs:{"data-text":i.text},on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.onPayVideo.apply(void 0,arguments)}}},[e("v-uni-view",{staticClass:"chat-video-box text-center-hv"},[e("v-uni-image",{staticClass:"chat-video",attrs:{src:a("d097")}})],1)],1):t._e(),"6"==i.type?e("v-uni-view",{staticClass:"tui-chatbox tui-chatbox-location tui-chatbox-left tui-chatbox-video",attrs:{"data-text":i.text},on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.onLocation.apply(void 0,arguments)}}},[e("v-uni-view",{staticClass:"text-inline pt-sm pl-sm "},[t._v(t._s(t.formatLocation(i)))]),e("v-uni-view",{staticClass:"text-inline text-sm pb-sm pl-sm "},[t._v(t._s(t.formatLocationDetail(i)))]),e("v-uni-view",{staticClass:"chat-location text-center-hv"},[e("tui-icon",{attrs:{name:"gps",size:40,color:"#666"}})],1)],1):t._e()],1):t._e(),i.from==t.me.id?e("v-uni-view",{staticClass:"tui-chat-right"},["0"==i.type?e("v-uni-view",{staticClass:"tui-chatbox tui-chatbox-right"},[t._v(t._s(i.text))]):t._e(),"1"==i.type?e("v-uni-view",{staticClass:"tui-chatbox tui-chatbox-right tui-chatbox-video",attrs:{"data-src":t.app.upload+i.text},on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.previewImage.apply(void 0,arguments)}}},[e("v-uni-view",{staticClass:" text-center-hv "},[e("v-uni-image",{staticClass:"img-chat",attrs:{src:t.app.upload+i.text,mode:"widthFix"}})],1)],1):t._e(),"2"==i.type?e("v-uni-view",{staticClass:"tui-chatbox tui-chatbox-right",class:{"tui-chatbox-play-right":t.index_play_msg==n&&1==t.index_play},style:{width:100+4*(i.duration<=0?1:i.duration>60?60:i.duration)+"rpx"},attrs:{"data-index":n,"data-text":i.text},on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.onPayAudio.apply(void 0,arguments)}}},[e("v-uni-view",{staticClass:"box"},[e("v-uni-view"),e("v-uni-view",{staticClass:"rows"},[e("v-uni-view",{staticClass:" text-center-hv "},[e("v-uni-view",[t._v(t._s(i.duration<=0?1:i.duration>60?60:i.duration)+'"')])],1),e("v-uni-view",{staticClass:" text-center-hv chat-audio-right"},[e("v-uni-image",{staticClass:"chat-audio",attrs:{src:a("8fd9")}})],1)],1)],1)],1):t._e(),"3"==i.type?e("v-uni-view",{staticClass:"tui-chatbox tui-chatbox-right tui-chatbox-video",attrs:{"data-text":i.text},on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.onPayVideo.apply(void 0,arguments)}}},[e("v-uni-view",{staticClass:"chat-video-box text-center-hv"},[e("v-uni-image",{staticClass:"chat-video",attrs:{src:a("d097")}})],1)],1):t._e(),"6"==i.type?e("v-uni-view",{staticClass:"tui-chatbox tui-chatbox-location tui-chatbox-right tui-chatbox-video",attrs:{"data-text":i.text},on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.onLocation.apply(void 0,arguments)}}},[e("v-uni-view",{staticClass:"text-inline pt-sm pl-sm "},[t._v(t._s(t.formatLocation(i)))]),e("v-uni-view",{staticClass:"text-inline text-sm pb-sm pl-sm "},[t._v(t._s(t.formatLocationDetail(i)))]),e("v-uni-view",{staticClass:"chat-location text-center-hv"},[e("tui-icon",{attrs:{name:"gps",size:40,color:"#666"}})],1)],1):t._e(),e("v-uni-image",{staticClass:"tui-user-pic tui-left",attrs:{src:t.me.avatar,"data-id":i.creby},on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.onAvatar.apply(void 0,arguments)}}})],1):t._e()],1)})),1)],1)],1)],1)},n=[]},"3fa8":function(t,i,a){"use strict";a.r(i);var e=a("7e09"),n=a("2089");for(var o in n)["default"].indexOf(o)<0&&function(t){a.d(i,t,(function(){return n[t]}))}(o);a("1cd3");var s=a("f0c5"),r=Object(s["a"])(n["default"],e["b"],e["c"],!1,null,"05ca4db2",null,!1,e["a"],void 0);i["default"]=r.exports},"4f82":function(t,i,a){var e=a("24fb");i=e(!1),i.push([t.i,"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n/* color start*/.tui-primary[data-v-05ca4db2]{background:#5677fc;color:#fff}.tui-danger[data-v-05ca4db2]{background:#ed3f14;color:#fff}.tui-red[data-v-05ca4db2]{background:#ff201f;color:#fff}.tui-warning[data-v-05ca4db2]{background:#ff7900;color:#fff}.tui-green[data-v-05ca4db2]{background:#19be6b;color:#fff}.tui-white[data-v-05ca4db2]{background:#fff;color:#333}.tui-black[data-v-05ca4db2]{background:#000;color:#fff}.tui-gray[data-v-05ca4db2]{background:#ededed!important;color:#999!important}\n\n/* color end*/\n\n/* badge start*/.tui-badge-dot[data-v-05ca4db2]{height:8px;width:8px;border-radius:4px;line-height:1}.tui-badge[data-v-05ca4db2]{font-size:12px;line-height:1;padding:3px 6px;border-radius:50px}.tui-badge-small[data-v-05ca4db2]{-webkit-transform:scale(.8);transform:scale(.8);-webkit-transform-origin:center center;transform-origin:center center}\n\n/* badge end*/",""]),t.exports=i},"5f08":function(t,i,a){var e=a("258e");e.__esModule&&(e=e.default),"string"===typeof e&&(e=[[t.i,e,""]]),e.locals&&(t.exports=e.locals);var n=a("4f06").default;n("93068870",e,!0,{sourceMap:!1,shadowMode:!1})},6125:function(t,i,a){"use strict";a.r(i);var e=a("2ac4"),n=a.n(e);for(var o in e)["default"].indexOf(o)<0&&function(t){a.d(i,t,(function(){return e[t]}))}(o);i["default"]=n.a},"7ce4":function(t,i,a){"use strict";a.d(i,"b",(function(){return e})),a.d(i,"c",(function(){return n})),a.d(i,"a",(function(){}));var e=function(){var t=this,i=t.$createElement,a=t._self._c||i;return t.visible?a("v-uni-view",{staticClass:"tui-loadmore"},[a("v-uni-view",{class:["tui-loading-"+t.index,3==t.index&&t.type?"tui-loading-"+t.type:""]}),a("v-uni-view",{staticClass:"tui-loadmore-tips"},[t._v(t._s(t.text))])],1):t._e()},n=[]},"7e09":function(t,i,a){"use strict";a.d(i,"b",(function(){return e})),a.d(i,"c",(function(){return n})),a.d(i,"a",(function(){}));var e=function(){var t=this.$createElement,i=this._self._c||t;return this.visible?i("v-uni-view",{staticClass:"tui-badge-class",class:[this.dot?"tui-badge-dot":"tui-badge","tui-"+this.type,this.size?"tui-badge-small":""]},[this._t("default")],2):this._e()},n=[]},"8fd9":function(t,i,a){t.exports=a.p+"static/img/icon_audio_right.8ac4ca11.png"},"9a12":function(t,i,a){"use strict";var e=a("227f"),n=a.n(e);n.a},cecc:function(t,i,a){"use strict";(function(t){a("7a82");var e=a("4ea4").default;Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var n=e(a("5530"));a("ac1f"),a("d3b7"),a("159b"),a("14d9");var o=e(a("2ac2")),s=e(a("3fa8")),r=e(a("1304")),d=uni.getRecorderManager(),c=uni.createInnerAudioContext(),l={components:{tuiIcon:o.default,tuiBadge:s.default,tuiLoadmore:r.default},data:function(){return{app:this.app,user_id:"",me:{},you:{},chat_list:[],input_text:"",input_type:"0",input_text_title:"按住 说话",input_text_voice_type:"0",input_text_cancel_type:"0",loadding:!1,show:!1,bottom:0,scrollTop:0,style:{pageHeight:0,contentViewHeight:0,footViewHeight:90,mitemHeight:0},voicePath:"",startData:{clientX:0,clientY:0},audio_time:0,audio_time_loop:null,index_play_msg:-1,index_play:-1}},computed:{formatLocation:function(){return function(t){var i=this.app.toObject(t.text);if(i&&i.name)return i.name}},formatLocationDetail:function(){return function(t){var i=this.app.toObject(t.text);if(i&&i.address)return i.address}}},onLoad:function(i){var a=this;this.app.post("api/chat/chat_user_info",{user_id:this.user_id},(function(t){a.me=t.me,a.you=t.you,a.app.setTitle(a.you.nickname)})),this.reLoad(),null!=this.app.timeLoop&&clearInterval(this.app.timeLoop),this.app.timeLoop=setInterval((function(){a.reLoad()}),3e3);var e=this;d.onStop((function(i){t("log","录制的语音: "+i.tempFilePath," at pages/message/message_all.vue:289"),e.voicePath=i.tempFilePath})),c.onPlay((function(){a.index_play=1,t("log","开始播放"," at pages/message/message_all.vue:295")})),c.onError((function(i){a.index_play=-1,t("log",i.errMsg," at pages/message/message_all.vue:299"),t("log",i.errCode," at pages/message/message_all.vue:300")})),c.onStop((function(){a.index_play=-1,t("log","停止播放"," at pages/message/message_all.vue:304")})),c.onEnded((function(){a.index_play=-1,t("log","播放结束"," at pages/message/message_all.vue:308")}))},onHide:function(){clearInterval(this.app.timeLoop)},onUnload:function(){clearInterval(this.app.timeLoop)},methods:{onAvatar:function(t){var i=this.app.ed(t).id;this.app.go("/pages/index/detail/detail",{user_id:i})},reLoad:function(){this.onChatNext()},onInputText:function(t){this.input_text=this.app.ev(t)},send:function(t){var i=this;this.app.post("api/chat/chat_send",{user_id:this.user_id,text:this.input_text},(function(t){i.input_text="",i.reLoad()}))},scrollToBottom:function(){var t=uni.getSystemInfoSync();this.style.pageHeight=t.windowHeight,this.style.contentViewHeight=t.windowHeight-uni.getSystemInfoSync().screenWidth/750*100;var i=this,a=uni.createSelectorQuery();a.selectAll(".m-item").boundingClientRect(),a.select("#scrollview").boundingClientRect(),a.exec((function(t){i.style.mitemHeight=0,t[0].forEach((function(t){i.style.mitemHeight=i.style.mitemHeight+t.height})),setTimeout((function(){i.style.mitemHeight>i.style.contentViewHeight-100&&(i.scrollTop=i.style.mitemHeight-i.style.contentViewHeight)}),100)}))},startRecord:function(){t("log","开始录音"," at pages/message/message_all.vue:378"),d.start()},endRecord:function(){t("log","录音结束"," at pages/message/message_all.vue:383"),d.stop()},playVoice:function(){t("log","播放录音"," at pages/message/message_all.vue:387");var i=uni.createInnerAudioContext();i.autoplay=!0,this.voicePath&&(i.src=this.voicePath,i.play())},onUploadVoice:function(){var t=this;this.app.uploadFile("api/chat/chat_send",{name:"file",path:this.voicePath,data:{type:"2",user_id:this.user_id}},(function(i){t.reLoad()}))},onPayAudio:function(t){var i=this.app.ed(t).index;this.chat_list[i];if(-1==this.index_play||i!=this.index_play_msg){c.stop();var a=this.app.upload+this.app.ed(t).text;c.src=a,c.play()}else c.stop();this.index_play_msg=i},onPreAddAudio:function(t){var i=this;this.startData.clientX=t.changedTouches[0].clientX,this.startData.clientY=t.changedTouches[0].clientY,this.input_text_title="松开 结束",this.input_text_voice_type="1",this.input_text_cancel_type="0",this.audio_time=0,this.audio_time_loop&&clearInterval(this.audio_time_loop),this.audio_time_loop=setInterval((function(){i.audio_time++,i.audio_time>60&&(i.audio_time=60)}),1e3),d.stop(),d.start()},onMoveAddAudio:function(i){var a=i.changedTouches[0].clientX-this.startData.clientX,e=i.changedTouches[0].clientY-this.startData.clientY;e>200||e<-200?(t("log","上下滑"," at pages/message/message_all.vue:449"),this.input_text_cancel_type="1"):(this.input_text_cancel_type="0",a>100?t("log","右滑"," at pages/message/message_all.vue:454"):a<-100?t("log","左滑"," at pages/message/message_all.vue:456"):t("log","无效"," at pages/message/message_all.vue:458"))},onAddAudio:function(i){var a=this;this.input_text_cancel_type="0";i.changedTouches[0].clientX,this.startData.clientX;var e=i.changedTouches[0].clientY-this.startData.clientY;e>200||e<-200?(t("log","取消发送"," at pages/message/message_all.vue:469"),this.input_text_title="按住 说话",this.input_text_voice_type="0",d.stop()):(t("log","发送 语音消息"," at pages/message/message_all.vue:476"),this.input_text_title="按住 说话",this.input_text_voice_type="0",d.stop(),setTimeout((function(){var t=uni.createInnerAudioContext();t.src=a.voicePath,setTimeout((function(){var t=uni.createInnerAudioContext();t.src=a.voicePath;var i=t.duration;t.duration<1?a.app.toast("录制时间过短"):a.app.uploadFile("api/chat/chat_send",{name:"file",path:a.voicePath,data:{type:"2",user_id:a.user_id,duration:i}},(function(t){a.reLoad()}))}),200)}),200))},onCancelVoice:function(i){this.input_text_title="按住 说话",this.input_text_voice_type="0",d.stop(),t("log","取消发送"," at pages/message/message_all.vue:513")},onAddImg:function(t){var i=this;this.app.chooseImage((function(t){var a=[];for(var e in t)a.push({name:"file",path:t[e],data:{type:"1",user_id:i.user_id}});i.app.uploadFiles("api/chat/chat_send",a,(function(){i.reLoad()}))}),9)},previewImage:function(t){this.app.previewImage(t)},onAddVideo:function(t){var i=this;this.app.chooseVideo((function(t,a){var e=a.duration,n={name:"file",path:t,data:{type:"3",user_id:i.user_id,duration:e}};e>60?i.app.toast("视频超过60s"):i.app.uploadFile("api/chat/chat_send",n,(function(){i.reLoad()}))}))},onInputTypeVoice:function(t){this.input_type="2"},onInputTypeText:function(t){this.input_type="0"},onChatPre:function(){var t=this;this.loadding=!0;var i={user_id:this.user_id};this.chat_list&&this.chat_list.length>0&&(i.first_id=this.chat_list[0].id),this.app.post("api/chat/chat_user_pre_all",(0,n.default)({},i),(function(i){var a=[];for(var e in i.chat_list)a.push(i.chat_list[e]);for(var n in t.chat_list)a.push(t.chat_list[n]);t.chat_list=a,t.show=!0,t.loadding=!1}))},onChatNext:function(){var t=this,i={user_id:this.user_id};this.chat_list&&this.chat_list.length>0&&(i.last_id=this.chat_list[this.chat_list.length-1].id),this.app.post("api/chat/chat_user_next_all",(0,n.default)({},i),(function(i){var a=[];for(var e in t.chat_list)a.push(t.chat_list[e]);for(var n in i.chat_list)a.push(i.chat_list[n]);t.chat_list=a,setTimeout((function(){t.scrollToBottom()}),100)}))},onPayVideo:function(t){var i=this.app.upload+this.app.ed(t).text;this.app.go("/pages/message/video",{url:i})},onAddLocation:function(t){var i=this;this.app.getLocation((function(t){i.app.post("api/chat/chat_send",{type:"6",user_id:i.user_id,text:i.app.toJson(t)},(function(t){i.reLoad()}))}))},formatChatText:function(t){for(var i in t){var a=t[i];"6"==a.type&&(a.text=this.app.toObject(a.text)),t[i]=a}return t},onLocation:function(i){var a=this.app.ed(i).text,e=this.app.toObject(a),n=e.latitude,o=e.longitude;n&&o&&n>0&&o>0?uni.openLocation({latitude:e.latitude,longitude:e.longitude,name:e.name,address:e.address,success:function(){t("log","success map"," at pages/message/message_all.vue:669")}}):this.app.toast("位置错误")}},onPageScroll:function(t){var i=this;0!=t.scrollTop||this.loadding||(this.loadding=!0,setTimeout((function(){i.show=!0,i.loadding=!1,i.onChatPre()}),100))}};i.default=l}).call(this,a("0de9")["log"])},d097:function(t,i){t.exports="data:image/png;base64,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"},d8bc:function(t,i,a){var e=a("4f82");e.__esModule&&(e=e.default),"string"===typeof e&&(e=[[t.i,e,""]]),e.locals&&(t.exports=e.locals);var n=a("4f06").default;n("af1dc268",e,!0,{sourceMap:!1,shadowMode:!1})},ea22:function(t,i,a){t.exports=a.p+"static/img/icon_audio_left.20947981.png"},fb63:function(t,i,a){"use strict";a.r(i);var e=a("3f74"),n=a("25c3");for(var o in n)["default"].indexOf(o)<0&&function(t){a.d(i,t,(function(){return n[t]}))}(o);a("9a12");var s=a("f0c5"),r=Object(s["a"])(n["default"],e["b"],e["c"],!1,null,"934d2696",null,!1,e["a"],void 0);i["default"]=r.exports},fca5:function(t,i,a){var e=a("24fb");i=e(!1),i.push([t.i,'.input-text-voice-cancel[data-v-934d2696]{position:absolute;bottom:%?400?%\n\n    /* filter: Alpha(opacity=100); */\n    /* IE */\n    /* -moz-opacity:1; */\n    /* FF 主要是为了兼容老版本的FF */\n    /* opacity:1; */\n    /* FF */}uni-page-body[data-v-934d2696]{background:#ebedf6}body.?%PAGE?%[data-v-934d2696]{background:#ebedf6}.container[data-v-934d2696]{padding-left:%?20?%;padding-right:%?20?%;padding-bottom:%?146?%;box-sizing:border-box}\n\n/*--tabbar--*/.tui-operation[data-v-934d2696]{height:100%;width:100%;height:%?100?%;overflow:hidden;background:#eff2fc;position:fixed;left:0;bottom:0;display:flex;align-items:center;justify-content:space-between;padding-bottom:env(safe-area-inset-bottom);z-index:999}.tui-operation-inpupt-voice[data-v-934d2696]{background:#000;\n    /* width: 100%;\n    height: 100%;\n    overflow: hidden;\n    position: absolute;\n    z-index: 999; */padding-bottom:%?100?%;filter:Alpha(opacity=50);\n    /* IE */-moz-opacity:.5;\n    /* FF 主要是为了兼容老版本的FF */opacity:.5\n    /* FF */}.tui-safearea-bottom[data-v-934d2696]{width:100%;height:env(safe-area-inset-bottom)}.tui-operation[data-v-934d2696]::before{content:"";position:absolute;top:0;right:0;left:0;border-top:%?1?% solid #eaeef1;-webkit-transform:scaleY(.5);transform:scaleY(.5)}.tui-chat-operation[data-v-934d2696]{background:#f6f6f6!important\n    /* padding-right: 18upx; */\n    /* box-sizing: border-box; */}.tui-pl[data-v-934d2696]{padding-left:%?16?%}.tui-pr[data-v-934d2696]{padding-right:%?16?%}.tui-right-flex[data-v-934d2696]{display:flex;align-items:center;justify-content:center}.tui-input-box[data-v-934d2696]{\n    /* width: 78%; */width:100%;justify-content:flex-start}.tui-chat-input[data-v-934d2696]{background:#fff;height:%?72?%;border-radius:%?6?%;padding-left:%?20?%;padding-right:%?20?%;flex:1;width:100%}.tui-opcity[data-v-934d2696]{opacity:.5}\n\n/*--tabbar--*/\n\n/*chatbox*/.tui-chat-content[data-v-934d2696]{width:100%}.tui-chatbox[data-v-934d2696]{max-width:66%;border-radius:%?10?%;position:relative;padding:%?20?% %?22?%;font-size:%?32?%;color:#000;\n    /* text-align: justify; */word-break:break-all;word-wrap:break-word}.tui-chatbox[data-v-934d2696]::before{content:"";position:absolute;width:0;height:0;top:%?20?%;border:%?16?% solid}.tui-chatbox-left[data-v-934d2696]{background:#fff;border:%?1?% solid #fff;display:inline-block}.tui-chatbox-left[data-v-934d2696]::before{right:100%;border-color:transparent #fff transparent transparent}.tui-chatbox-right[data-v-934d2696]{background:#a0d5f3;border:%?1?% solid #a0d5f3}.tui-chatbox-right[data-v-934d2696]::before{left:100%;border-color:transparent transparent transparent #a0d5f3}\n\n/*chatbox*/.tui-chat-left[data-v-934d2696],\n.tui-chat-right[data-v-934d2696]{display:flex;align-items:flex-start;padding-top:%?36?%}.tui-user-pic[data-v-934d2696]{width:%?80?%;height:%?80?%;flex-shrink:0;\n    /* border-radius: 50%; */display:block;border-radius:10%}.tui-left[data-v-934d2696]{margin-left:%?26?%}.tui-right[data-v-934d2696]{margin-right:%?26?%}.tui-chat-right[data-v-934d2696]{justify-content:flex-end}.tui-chat-center[data-v-934d2696]{display:flex;align-items:center;justify-content:center;height:%?28?%;font-size:%?28?%;color:#666;padding-top:%?36?%}.tui-label[data-v-934d2696]{display:inline-block;background:rgba(0,0,0,.4);color:#fff;font-size:%?24?%;line-height:%?24?%;margin-top:%?36?%;padding:%?12?% %?16?%;text-align:center;border-radius:%?8?%;margin-left:50%;-webkit-transform:translateX(-50%);transform:translateX(-50%)}.tui-img-chatbox[data-v-934d2696]{position:relative}.tui-img-chatbox[data-v-934d2696]::after{content:"";position:absolute;height:200%;width:200%;border:%?1?% solid #eaeef1;transform-origin:0 0;-webkit-transform-origin:0 0;-webkit-transform:scale(.5);transform:scale(.5);left:0;top:0;border-radius:%?20?%}.tui-chat-img[data-v-934d2696]{max-width:%?200?%;\n    /* min-height: 80upx; */display:block;border-radius:%?10?%}.tui-chat-flex[data-v-934d2696]{display:flex;align-items:center}.tui-flex-center[data-v-934d2696]{display:flex;align-items:center}.tui-chat-voice[data-v-934d2696]{width:%?40?%;height:%?40?%;display:block;flex-shrink:0}.tui-rotate[data-v-934d2696]{-webkit-transform:rotate(180deg);transform:rotate(180deg)}.tui-chat-fail[data-v-934d2696]{width:%?50?%;height:%?50?%;display:block;flex-shrink:0}.tui-mr[data-v-934d2696]{margin-right:%?16?%}.tui-ml[data-v-934d2696]{margin-left:%?16?%}.tui-flex-end[data-v-934d2696]{justify-content:flex-end}.tui-flex-reverse[data-v-934d2696]{flex-direction:row-reverse}.chat-video-box[data-v-934d2696]{border-radius:%?5?%;background-color:#333;width:%?250?%;height:%?200?%}.chat-video[data-v-934d2696]{background-color:#333;width:%?100?%;height:%?75?%}.tui-chatbox[data-v-934d2696]{padding:%?20?% %?20?%}.tui-chatbox-video[data-v-934d2696]{padding:%?6?% %?6?%}.tui-chatbox-play-left[data-v-934d2696]{background:#9eea6a;border:%?1?% solid #9eea6a}.tui-chatbox-play-right[data-v-934d2696]{background:#9eea6a;border:%?1?% solid #9eea6a}.tui-chatbox-play-left[data-v-934d2696]::before{right:100%;border-color:transparent #9eea6a transparent transparent}.tui-chatbox-play-right[data-v-934d2696]::before{left:100%;border-color:transparent transparent transparent #9eea6a}\n\n/* 位置消息 */.chat-location[data-v-934d2696]{border-radius:%?5?%;background-color:#f0f0f0;width:100%;height:%?180?%}.tui-chatbox-location[data-v-934d2696]{width:60%}',""]),t.exports=i}}]);