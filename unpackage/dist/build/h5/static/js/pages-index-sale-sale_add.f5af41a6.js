(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-index-sale-sale_add"],{"32ba":function(t,i,a){"use strict";(function(t){a("7a82");var e=a("4ea4").default;Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var n=e(a("5530"));a("a434"),a("99af"),a("14d9"),a("d3b7"),a("159b");var o={data:function(){return{model:{},listPhoto:[],listPhotoBase:[],listPhotoLocal:[]}},methods:{onInput:function(t){var i=this.app.ed(t).key;this.model[i]=this.app.ev(t)},onDelImg:function(t){var i=this.app.ed(t).index;this.listPhoto.splice(i,1),this.listPhotoBase.splice(i,1)},onDelImgLocal:function(t){var i=this.app.ed(t).index;this.listPhotoLocal.splice(i,1)},onAddImg:function(){var t=this,i=6-this.listPhoto.length-this.listPhotoLocal.length;i>0?this.app.chooseImage((function(i){var a=t.app.concat(t.listPhotoLocal,i);t.listPhotoLocal=a}),i):this.app.toast("超出上限")},previewImage:function(t){this.app.previewImage(t)},onSave:function(){var i=this;this.app.uploadFiles("api/sale/upload",this.listPhotoLocal,(function(a){var e=[];for(var o in a)e.push(a[o].saveName);var s=i.listPhotoBase.concat(e);i.model.imgs=i.app.join(s,","),e.length>0&&(i.model.img=e[0]),i.model.type="2",i.app.postLoad("api/sale/save",(0,n.default)({},i.model),(function(a){"0"==a.code&&(i.app.toast("发布成功"),t("log",e," at pages/index/sale/sale_add.vue:120"))}))}))}},onLoad:function(t){var i=this,a=t.id;a&&this.app.post("api/sale/find",{id:a},(function(t){i.model=t.data;var a=t.imgs_split;a.forEach((function(t){i.listPhoto.push(i.app.upload+t),i.listPhotoBase.push(t)}))}))}};i.default=o}).call(this,a("0de9")["log"])},"5dc1":function(t,i,a){"use strict";a.r(i);var e=a("32ba"),n=a.n(e);for(var o in e)["default"].indexOf(o)<0&&function(t){a.d(i,t,(function(){return e[t]}))}(o);i["default"]=n.a},a564:function(t,i,a){"use strict";a.d(i,"b",(function(){return e})),a.d(i,"c",(function(){return n})),a.d(i,"a",(function(){}));var e=function(){var t=this,i=t.$createElement,a=t._self._c||i;return a("v-uni-view",[a("v-uni-view",{staticClass:"text-center-h text-md"},[t._v("发布生产")]),a("v-uni-view",{staticClass:"pp"},[a("v-uni-view",{staticClass:"rows"},[a("v-uni-view",{staticClass:"form-text-left"},[t._v("标题")]),a("v-uni-view",{staticClass:"form-text-right"},[a("v-uni-input",{attrs:{"data-key":"title",value:t.model.title,type:"text",placeholder:"请输入标题"},on:{input:function(i){arguments[0]=i=t.$handleEvent(i),t.onInput.apply(void 0,arguments)}}})],1)],1),a("v-uni-view",{staticClass:"rows pt"},[a("v-uni-view",{staticClass:"form-text-left"},[t._v("描述")]),a("v-uni-view",{staticClass:"form-text-right"},[a("v-uni-textarea",{staticClass:"text-height-desc",attrs:{"data-key":"text",value:t.model.text,maxlength:"10240",type:"text",placeholder:"请输入描述"},on:{input:function(i){arguments[0]=i=t.$handleEvent(i),t.onInput.apply(void 0,arguments)}}})],1)],1),a("v-uni-view",{staticClass:"rows pt"},[a("v-uni-view",{staticClass:"form-text-left form-text-left"},[t._v("价格")]),a("v-uni-view",{staticClass:"form-text-right"},[a("v-uni-input",{attrs:{"data-key":"price",value:t.model.price,type:"text",placeholder:"请输入价格"},on:{input:function(i){arguments[0]=i=t.$handleEvent(i),t.onInput.apply(void 0,arguments)}}})],1)],1),a("v-uni-view",{staticClass:"rows pt"},[a("v-uni-view",{staticClass:"form-text-left form-text-left"},[t._v("数量")]),a("v-uni-view",{staticClass:"form-text-right"},[a("v-uni-input",{attrs:{"data-key":"count",value:t.model.count,type:"text",placeholder:"请输入数量"},on:{input:function(i){arguments[0]=i=t.$handleEvent(i),t.onInput.apply(void 0,arguments)}}})],1)],1),a("v-uni-view",{staticClass:"rows pt "},[a("v-uni-view",{staticClass:"form-text-left"},[t._v("图片")]),a("v-uni-view",{staticClass:"form-text-right"},[a("v-uni-input",{attrs:{type:"text",placeholder:"请选择图片"},on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.onAddImg.apply(void 0,arguments)}}})],1)],1),a("v-uni-view",{staticClass:"box-wrap-start"},t._l(t.listPhoto,(function(i,e){return a("v-uni-view",{key:e,staticClass:"col img-box pr pt"},[a("v-uni-image",{staticClass:"img-border",attrs:{src:i,"data-src":i},on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.previewImage.apply(void 0,arguments)}}}),a("v-uni-button",{staticClass:"btn-danger  full-width text-center-hv",attrs:{"data-index":e},on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.onDelImg.apply(void 0,arguments)}}},[t._v("x")])],1)})),1),a("v-uni-view",{staticClass:"box-wrap-start"},t._l(t.listPhotoLocal,(function(i,e){return a("v-uni-view",{key:e,staticClass:"col img-box pr pt"},[a("v-uni-image",{staticClass:"img-border",attrs:{src:i,"data-src":i},on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.previewImage.apply(void 0,arguments)}}}),a("v-uni-button",{staticClass:"btn-danger  full-width text-center-hv",attrs:{"data-index":e},on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.onDelImgLocal.apply(void 0,arguments)}}},[t._v("x")])],1)})),1),a("v-uni-view",{staticClass:"pt-lg"},[a("v-uni-button",{staticClass:"btn-primary",on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.onSave.apply(void 0,arguments)}}},[t._v("发布")])],1)],1)],1)},n=[]},c75b:function(t,i,a){"use strict";a.r(i);var e=a("a564"),n=a("5dc1");for(var o in n)["default"].indexOf(o)<0&&function(t){a.d(i,t,(function(){return n[t]}))}(o);var s=a("f0c5"),l=Object(s["a"])(n["default"],e["b"],e["c"],!1,null,"a340cafc",null,!1,e["a"],void 0);i["default"]=l.exports}}]);